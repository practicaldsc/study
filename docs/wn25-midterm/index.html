<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Winter 2025 Midterm Exam</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../assets/theme.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Winter 2025 Midterm Exam</h1>
</header>
<p><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- add after bootstrap.min.css -->
<link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
<!-- add after bootstrap.min.js or bootstrap.bundle.min.js -->
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script></p>
<!-- for difficulty gauges-->
<script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-B947E6J6H4"></script> -->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  // gtag('js', new Date());

  // gtag('config', 'G-B947E6J6H4');
</script>
<p><a href="../index.html">← return to study.practicaldsc.org</a></p>
<hr />
<p><strong>Instructor(s):</strong> Suraj Rampure</p>
<p>This exam was administered in-person. The exam was closed-notes,
except students were allowed to bring a single two-sided notes sheet. No
calculators were allowed. Students had 120 minutes to take this exam.
<br><br>Access the original exam PDF here:
<a href="../assets/pdf/fa24-midterm-a.pdf">Version A</a>,
<a href="../assets/pdf/fa24-midterm-b.pdf">Version B</a>. (This site is
based on Version A.) <br><br>Note that for the Winter 2025 Midterm Exam,
all of the questions here (except Question 10 on SQL) are in scope, but
there are a few questions from the
<a href="https://study.practicaldsc.org/fa24-final/index.html">Fall 2024
Final Exam</a> that are also in scope that cover topics that aren’t here
(like loss functions and regression). See the top of that exam for more
details.</p>
<hr />
<div class="center">
<p><strong>Data Overview: Food Deliveries</strong></p>
</div>
<p>In this exam, we’ll work with the DataFrame <code>orders</code>,
which contains information about deliveries made using various food
delivery services in India.</p>
<p>The first few rows of <code>orders</code> are shown below, but
<code>orders</code> has many more rows than are shown.</p>
<center><img src="../assets/images/wn25-midterm/df.png" width=800></center>
<p>Each row in <code>orders</code> contains information about a single
delivery. The columns in <code>orders</code> are as follows:</p>
<ul>
<li><p><code>"driver" (str)</code>: The delivery driver’s ID. Note that
there are duplicate values in this column, because some drivers have
made multiple deliveries.</p></li>
<li><p><code>"type" (str)</code>: The type of food ordered; either
<code>"Buffet"</code>, <code>"Drinks"</code>, <code>"Meal"</code>, or
<code>"Snack"</code>.</p></li>
<li><p><code>"rating" (float)</code>: The average rating of the driver
out of 5, <strong>after</strong> making the given delivery.</p></li>
<li><p><code>"dist" (float)</code>: The distance from the restaurant to
the delivery address, in kilometers.</p></li>
<li><p><code>"traffic" (str)</code>: The level of traffic; either
<code>"High"</code>, <code>"Low"</code>, <code>"Moderate"</code>, or
<code>"Very High"</code>.</p></li>
<li><p><code>"minutes" (float)</code>: The time in minutes between when
a customer places their order and when they receive it.</p></li>
</ul>
<p><strong>Throughout the exam</strong>, assume we have already run all
necessary import statements.</p>
<p><strong>Make sure you have read the Data Overview before
beginning!</strong></p>
<hr />
<h2 id="problem-1">Problem 1</h2>
<p>Driver <code>"WOLVAA01"</code> has made several deliveries. Write an
expression that evaluates to the number of minutes
<code>"WOLVAA01"</code> took to deliver their
<strong>second</strong>-fastest order.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="true" aria-controls="collapse1">
Click to view the solution.
</button>
</h2>
<div id="collapse1" class="accordion-collapse collapse"
aria-labelledby="heading1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:</p>
<div id="cb1" class="sourceCode">
<pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a>    orders.loc[orders[<span class="st">"driver"</span>] <span class="op">==</span> <span class="st">"WOLVAA01"</span>, <span class="st">"minutes"</span>].sort_values().iloc[<span class="dv">1</span>] </span></code></pre>
</div>
<p>or</p>
<div id="cb2" class="sourceCode">
<pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1" tabindex="-1"></a>    orders.loc[orders[<span class="st">"driver"</span>] <span class="op">==</span> <span class="st">"WOLVAA01"</span>, <span class="st">"minutes"</span>].sort_values(ascending<span class="op">=</span><span class="va">False</span>).iloc[<span class="op">-</span><span class="dv">2</span>]</span></code></pre>
</div>
<p><code>loc</code> helps us extract a subset of the rows and columns in
a DataFrame. In general, <code>loc</code> works as follows:</p>
<pre><code>    orders.loc[&lt;subset of rows&gt;, &lt;subset of columns&gt;]</code></pre>
<p>Here:</p>
<ul>
<li><p>We want all of the rows where <code>orders["driver"]</code> is
equal to <code>"WOLVAA01"</code>, so we use the expression
<code>orders["driver"] == "WOLVAA01"</code> as the first input to
<code>loc</code>. (Remember, <code>orders["driver"] == "WOLVAA01"</code>
is a Series of <code>True</code>s and <code>False</code>s; only the
<code>True</code> values are kept in the result.)</p></li>
<li><p>We want just the column <code>"minutes"</code>, so we supply it
as a string as the second input to <code>loc</code>.</p></li>
</ul>
<p>Now, we have a Series with the minutes of all orders that
<code>"WOLVAA01"</code> has reviewed; calling the
<code>.sort_values()</code> method on this Series will give us back
another Series with the minutes of the orders sorted by default in
ascending order. Since we are looking for the second fastest order, we
can then use <code>iloc</code> to extract this value. As python is
zero-indexed this value will be 1.</p>
<p>Similarly, if you specify <code>ascending=False</code> as a parameter
to <code>.sort_values()</code>, the orders will be sorted in descending
order with the order taking the longest amount of time being on top. In
such a case, we would want to extract the second last element from the
series.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-2">Problem 2</h2>
<p>Drivers’ ratings can change over time, as they perform more and more
deliveries. For instance, after one delivery a driver’s rating might be
4.8, and after their next delivery it might drop to 4.7. We say a driver
is <em>consistent</em> if their rating was the <strong>exact
same</strong> for all of their deliveries in <code>orders</code>.</p>
<p>Fill in the blanks so <code>prop_consistent</code> below evaluates to
a float, corresponding to the <strong>proportion of drivers</strong> who
are consistent.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> f(x):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> __(iv)__</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>    prop_consistent <span class="op">=</span> (</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>     orders</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>     .groupby(__(i)__)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>     [__(ii)__]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>     .__(iii)__(f)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>     .mean()</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="true" aria-controls="collapse2">
Click to view the solution.
</button>
</h2>
<div id="collapse2" class="accordion-collapse collapse"
aria-labelledby="heading2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong></p>
<ul>
<li><p><code>(i) "Driver"</code> - we use <code>groupby("Driver")</code>
because we want to check the consistency of ratings for each individual
driver. By grouping by “Driver,” we are able to look at each driver’s
set of ratings across their deliveries.</p></li>
<li><p><code>(ii) "rating"</code> - we want to check whether all ratings
for a given driver are the same.</p></li>
<li><p><code>(iii) agg</code> - The <code>.agg()</code> function allows
us to apply an aggregation function to each group (driver in this case).
This is necessary because we are checking a condition (whether the
ratings are the same) for each driver, and <code>agg</code> allows us to
apply a function that evaluates this condition across all the ratings of
a driver.</p></li>
<li><p><code>(iv) x.max() == x.min() or x.nunique() == 1</code> : This
is the boolean statement in our <code>f</code> function that checks if a
driver’s ratings are consistent. <code>x.max() == x.min()</code> checks
if all ratings are the same because if they are, the maximum and minimum
will be equal. Alternatively, <code>x.nunique() == 1</code> checks if
there is only one unique rating, ensuring consistency. Both conditions
together guarantee that the driver’s ratings haven’t changed.</p></li>
</ul>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-3">Problem 3</h2>
<p>Suppose the expression below evaluates to <code>1</code>.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>    (orders[orders[<span class="st">&quot;type&quot;</span>] <span class="op">==</span> <span class="st">&quot;Snack&quot;</span>][<span class="st">&quot;driver&quot;</span>]</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>     .value_counts()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>     .value_counts()</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>     .shape[<span class="dv">0</span>]</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>What can we conclude about <code>orders</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Every driver made at least 1 <code>"Snack"</code> delivery.</p></li>
<li><p><input type="radio" disabled="" /> Every driver made exactly 1 <code>"Snack"</code> delivery.</p></li>
<li><p><input type="radio" disabled="" /> Every driver made at most 1 <code>"Snack"</code> delivery.</p></li>
<li><p><input type="radio" disabled="" /> Every driver made exactly <span class="math inline">k</span>
<code>"Snack"</code> deliveries, where <span class="math inline">k</span> is some positive constant.</p></li>
<li><p><input type="radio" disabled="" /> Every driver made exactly 0 or exactly <span class="math inline">k</span> <code>"Snack"</code> deliveries, where
<span class="math inline">k</span> is some positive constant.</p></li>
<li><p><input type="radio" disabled="" /> Every driver that made a <code>"Snack"</code> delivery did not make
any other kind of delivery.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3" aria-expanded="true" aria-controls="collapse3">
Click to view the solution.
</button>
</h2>
<div id="collapse3" class="accordion-collapse collapse"
aria-labelledby="heading3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:
<code>Every driver made exactly 0 or exactly  k "Snack" deliveries, where k is some positive constant.</code></p>
<p>The expression filters the <code>orders</code> dataframe to include
only rows where the <code>type</code> column is equal to
<code>"Snack"</code>. We are focusing on the drivers who made “Snack”
deliveries. Then <code>.value_counts()</code> tells us how many “Snack”
deliveries each driver has made. For example, if Driver A made 3 Snack
deliveries, Driver A will have a count of 3. After the first
<code>.value_counts()</code>, the second <code>.value_counts()</code>
counts how many drivers have made the same number of “Snack”
deliveries.</p>
<p>For instance, if three drivers made 2 “Snack” deliveries each, and
two drivers made 3 “Snack” deliveries each, <code>value_counts()</code>
will return a series showing the count of drivers per number of
deliveries (e.g., 3 drivers made 2 deliveries, 2 drivers made 3
deliveries).</p>
<p>Lastly, the <code>.shape[0]</code> gets us the number of distinct
values in the second <code>value_counts()</code> result, which tells us
how many different numbers of “Snack” deliveries are represented in the
data. In this case, we know that it evaluates to <code>1</code>, which
means there is only one distinct number of deliveries made by
drivers.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-4">Problem 4</h2>
<p>In one English sentence, describe what the following expression
computes. Your sentence should start with “The driver", and should be
understandable by someone who has never written code before, i.e. it
should not use any technical terms.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>    (orders</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>        .groupby(<span class="st">&quot;driver&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        .<span class="bu">filter</span>(<span class="kw">lambda</span> df: df.shape[<span class="dv">0</span>] <span class="op">&gt;=</span> <span class="dv">10</span> <span class="kw">and</span> df[<span class="st">&quot;rating&quot;</span>].<span class="bu">min</span>() <span class="op">&gt;=</span> <span class="fl">4.5</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        .groupby(<span class="st">&quot;driver&quot;</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        [<span class="st">&quot;minutes&quot;</span>]</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        .<span class="bu">sum</span>()</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        .idxmax()</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4" aria-expanded="true" aria-controls="collapse4">
Click to view the solution.
</button>
</h2>
<div id="collapse4" class="accordion-collapse collapse"
aria-labelledby="heading4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong> The driver who has driven the most minutes
total, among all drivers with at least 10 deliveries and a minimum
review of 4.5.</p>
<p>The expression first groups the data by the driver column
(<code>.groupby("driver")</code>). After which it filters out drivers
who have made fewer than 10 deliveries or have a minimum rating below
4.5. Only drivers who meet both conditions (at least 10 deliveries and a
minimum rating of 4.5) remain in the output df. After filtering, the
expression groups the data by driver again and sums up the total minutes
each driver has driven. Lastly, the <code>.idxmax()</code> finds the
driver who has the maximum total minutes driven. This is the driver who
drove the most minutes.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-5">Problem 5</h2>
<p>Consider the DataFrame <code>C</code>, defined below.</p>
<pre><code>C = orders.pivot_table(
  index=&quot;type&quot;, # Possible values: &quot;Buffet&quot;, &quot;Drinks&quot;, &quot;Meal&quot;, &quot;Snacks&quot;
  columns=&quot;traffic&quot;, # Possible values: &quot;High&quot;, &quot;Low&quot;, &quot;Moderate&quot;, &quot;Very Low&quot;
  values=&quot;minutes&quot;,
  aggfunc=&quot;count&quot;
)</code></pre>
<p>Throughout this question, assume that after defining <code>C</code>
above, <strong>we sort <code>C</code> such that both its index and
columns are in ascending alphabetical order</strong> (as shown
above).</p>
<p><br></p>
<h3 id="problem-5.1">Problem 5.1</h3>
<p>Fill in the blanks so that the expression below evaluates to the
<strong>proportion of <code>"Snack"</code> deliveries that were made in
<code>"Moderate"</code> traffic</strong>. Each blank should be filled
with a single integer, float, string, or Boolean value.</p>
<pre><code>C.iloc[__(i)__, __(ii)__] / C.loc[__(iii)__].sum()</code></pre>
<p><code>(i)</code>: <code>(ii)</code>: <code>(iii)</code>:</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_1" aria-expanded="true" aria-controls="collapse5_1">
Click to view the solution.
</button>
</h2>
<div id="collapse5_1" class="accordion-collapse collapse"
aria-labelledby="heading5_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.2">Problem 5.2</h3>
<p>Fill in the blanks so that the expression below evaluates to the
<strong>proportion of deliveries made in <code>"Low"</code> traffic that
were for <code>"Buffet"</code>s</strong>. Blanks (i) and (ii) should
each be filled with a single integer, float, string, or Boolean
value.</p>
<pre><code>C.loc[__(i)__, __(ii)__] / __(iii)__.sum()</code></pre>
<p><code>(i)</code>: <code>(ii)</code>:</p>
<p><code>(iii)</code>:</p>
<table>
<tbody>
<tr>
<td style="text-align: left;">( ) <code>C.iloc[:, -1]</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align: left;">( ) <code>C.iloc[-1, :]</code></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_2" aria-expanded="true" aria-controls="collapse5_2">
Click to view the solution.
</button>
</h2>
<div id="collapse5_2" class="accordion-collapse collapse"
aria-labelledby="heading5_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.3">Problem 5.3</h3>
<p>In one English sentence, describe what the following expression
computes. Your sentence should be understandable by someone who has
never written code before, i.e. it should not use any technical
terms.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_3" aria-expanded="true" aria-controls="collapse5_3">
Click to view the solution.
</button>
</h2>
<div id="collapse5_3" class="accordion-collapse collapse"
aria-labelledby="heading5_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-6">Problem 6</h2>
<p>Consider the DataFrames <code>A</code> and <code>B</code>, shown
below in their entirety.</p>
<div class="center">
<p><img src="midterm-images/A.png" style="width:40.0%" alt="image" />
<img src="midterm-images/B.png" style="width:40.0%" alt="image" /></p>
</div>
<p>Note that the <code>"type"</code> value in row <strong>3</strong> of
DataFrame <code>B</code> is unknown. Remember from the Data Overview
page that the only possible values in the <code>"type"</code> column are
<code>"Buffet"</code>, <code>"Drinks"</code>, <code>"Meal"</code>, and
<code>"Snack"</code>.</p>
<p><br></p>
<h3 id="problem-6.1">Problem 6.1</h3>
<p>Suppose the DataFrame <code>A.merge(B, on="type")</code> has
<code>7</code> rows.</p>
<p>What must the unknown value, <span
class="math inline">\boxed{\text{???}}</span>, be? ( ) Drinks ( ) Buffet
( ) Meal ( ) Snack</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_1" aria-expanded="true" aria-controls="collapse6_1">
Click to view the solution.
</button>
</h2>
<div id="collapse6_1" class="accordion-collapse collapse"
aria-labelledby="heading6_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-6.2">Problem 6.2</h3>
<p>Suppose the DataFrame <code>A.merge(B, on="type")</code> has
<code>10</code> rows.</p>
<p>What must the unknown value, <span
class="math inline">\boxed{\text{???}}</span>, be?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>"Drinks"</code> ( ) <code>"Buffet"</code> ( )
<code>"Meal"</code> ( ) <code>"Snack"</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_2" aria-expanded="true" aria-controls="collapse6_2">
Click to view the solution.
</button>
</h2>
<div id="collapse6_2" class="accordion-collapse collapse"
aria-labelledby="heading6_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-6.3">Problem 6.3</h3>
<p>Suppose the DataFrame <code>A.merge(B, on="type", how="outer")</code>
has <span class="math inline">k</span> rows. The value of <span
class="math inline">k</span> depends on the unknown value, <span
class="math inline">\boxed{\text{???}}</span>.</p>
<p>Which integer below <strong>cannot</strong> be <span
class="math inline">k</span>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> 11 ( ) 12 ( ) 14 ( ) 16</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_3" aria-expanded="true" aria-controls="collapse6_3">
Click to view the solution.
</button>
</h2>
<div id="collapse6_3" class="accordion-collapse collapse"
aria-labelledby="heading6_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-6.4">Problem 6.4</h3>
<p>Suppose the unknown value, <span
class="math inline">\boxed{\text{???}}</span>, is
<code>"Buffet"</code>.</p>
<p>How many rows are in the DataFrame
<code>A.merge(B, on=["type", "rating"])</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> 0 ( ) 1 ( ) 2 ( ) 3 ( ) 4 ( ) 5 ( ) 6 ( ) 7</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_4" aria-expanded="true" aria-controls="collapse6_4">
Click to view the solution.
</button>
</h2>
<div id="collapse6_4" class="accordion-collapse collapse"
aria-labelledby="heading6_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-7">Problem 7</h2>
<p>The delivery company wants to reward a subset of its drivers with a
gift card for their service. To do so, they:</p>
<ol type="1">
<li><p>Choose an integer <span class="math inline">k</span> between 1
and 10 inclusive, uniformly at random.</p></li>
<li><p>Choose <span class="math inline">k</span> <strong>unique</strong>
drivers, uniformly at random, such that all drivers have the same chance
of being chosen, no matter how many deliveries they have made. Note that
a driver cannot be selected more than once.</p></li>
</ol>
<p>Driver <code>"WOLVAA01"</code> asks ChatGPT to write code that
simulates the probability that he wins a gift card, and it gives him
back the following:</p>
<pre><code>drivers = orders[&quot;driver&quot;].unique()

def choose_k():
    return np.random.choice(np.arange(1, 11))

def one_sim(k):
    selected = np.array([])
    for i in range(k):
        selectee = np.random.choice(drivers, 1, replace=False)
        selected = np.append(selected, selectee)
    return &quot;WOLVAA01&quot; in selected

def simulation():
    k = choose_k()
    N = 100_000
    total = 0
    for i in range(N):
        total = total + one_sim(k)
    return total / N</code></pre>
<p><code>simulation()</code> <em>should</em> return an estimate of the
probability that <code>"WOLVAA01"</code> wins a gift card, but some of
the code is potentially buggy. <strong>Select all issues</strong> with
the code above.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> <code>drivers</code> only includes the drivers that made one
delivery, rather than all drivers.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>choose_k</code> returns a random integer between <code>1</code>
and <code>11</code>, instead of one from <code>1</code> to
<code>10</code>.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>choose_k</code> always returns the same number.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>one_sim</code> draws <code>k</code> drivers with replacement,
instead of without replacement.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>one_sim</code> draws <code>k</code> drivers without
replacement, instead of with replacement.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>one_sim</code> always returns <code>False</code>, because
<code>selected</code> is always an empty array.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>simulation</code> only picks one value of <code>k</code>, when
it should select a new <code>k</code> on each iteration.</p></li>
</ul>
<p>[ ] None of the above.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading7">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7" aria-expanded="true" aria-controls="collapse7">
Click to view the solution.
</button>
</h2>
<div id="collapse7" class="accordion-collapse collapse"
aria-labelledby="heading7" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-8">Problem 8</h2>
<p>Suppose the DataFrame <code>D</code> contains a subset of the rows in
<code>orders</code>, such that:</p>
<ul>
<li><p>Some of the values in the <code>"minutes"</code> column are
missing.</p></li>
<li><p>None of the values in the <code>"minutes"</code> column are
missing for orders made in <code>"Moderate"</code> traffic.</p></li>
</ul>
<p>Each part of this question is independent of all other parts. In each
part, <strong>select all</strong> expressions that are
<strong>guaranteed</strong> to evaluate to the <strong>same</strong>
value, <strong>before and after</strong> the imputation code is run. The
first part is done for you.</p>
<p><br></p>
<h3 id="problem-8.1">Problem 8.1</h3>
<pre><code>t = lambda x: x.fillna(x.mean())
D[&quot;minutes&quot;] = t(D[&quot;minutes&quot;])</code></pre>
<ul>
<li><code>D["minutes"].isna().sum()</code></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_1" aria-expanded="true" aria-controls="collapse8_1">
Click to view the solution.
</button>
</h2>
<div id="collapse8_1" class="accordion-collapse collapse"
aria-labelledby="heading8_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-8.2">Problem 8.2</h3>
<pre><code>t = lambda x: x.fillna(x.mean())
D[&quot;minutes&quot;] = t(D[&quot;minutes&quot;])</code></pre>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> <code>D["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.groupby("traffic")["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> None of the above.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_2" aria-expanded="true" aria-controls="collapse8_2">
Click to view the solution.
</button>
</h2>
<div id="collapse8_2" class="accordion-collapse collapse"
aria-labelledby="heading8_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-8.3">Problem 8.3</h3>
<pre><code>t = lambda x: x.fillna(x.mean())
D[&quot;minutes&quot;] = D.groupby(&quot;traffic&quot;)[&quot;minutes&quot;].transform(t)</code></pre>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> <code>D["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.groupby("traffic")["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> None of the above.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_3" aria-expanded="true" aria-controls="collapse8_3">
Click to view the solution.
</button>
</h2>
<div id="collapse8_3" class="accordion-collapse collapse"
aria-labelledby="heading8_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-8.4">Problem 8.4</h3>
<pre><code>present = D.loc[D[&quot;minutes&quot;].notna(), &quot;minutes&quot;]
n = D[&quot;minutes&quot;].isna().sum()
D.loc[D[&quot;minutes&quot;].isna(), &quot;minutes&quot;] = np.random.choice(present, n)</code></pre>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> <code>D["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.groupby("traffic")["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> None of the above.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_4" aria-expanded="true" aria-controls="collapse8_4">
Click to view the solution.
</button>
</h2>
<div id="collapse8_4" class="accordion-collapse collapse"
aria-labelledby="heading8_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-9">Problem 9</h2>
<p>In the DataFrame <code>orders</code>, assume that:</p>
<ul>
<li><p>The median delivery time in <code>"Low"</code> traffic was 22
minutes.</p></li>
<li><p>The median delivery time in <code>"Moderate"</code> traffic was
31 minutes.</p></li>
<li><p>The median delivery time in <code>"High"</code> traffic was 42
minutes.</p></li>
<li><p>The median delivery time in <code>"Very High"</code> traffic was
60 minutes.</p></li>
</ul>
<p>Draw the following visualization, given the information you have.</p>
<pre><code>orders.plot(kind=&quot;box&quot;, x=&quot;traffic&quot;, y=&quot;minutes&quot;)</code></pre>
<p>While it’s not possible to draw the visualization exactly, since you
don’t have all of the exact delivery times, it is possible to roughly
sketch it, such that the information provided above is clearly visible.
Some additional instructions:</p>
<ul>
<li><p>For simplicity, assume that across <code>"traffic"</code>
categories, the variation in delivery times is roughly the
same.</p></li>
<li><p>Make sure your axes are labeled correctly. <em>(Hint: The <span
class="math inline">y</span>-axis should have numerical
labels.)</em></p></li>
</ul>
<div class="responsebox">
<p>4in</p>
</div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading9">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9" aria-expanded="true" aria-controls="collapse9">
Click to view the solution.
</button>
</h2>
<div id="collapse9" class="accordion-collapse collapse"
aria-labelledby="heading9" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-10">Problem 10</h2>
<p>[(10 pts)]</p>
<p>Consider the following corpus of two documents:</p>
<ol type="1">
<li><p>butter chicken <span class="math inline">\underbrace{\text{naan
naan ... naan}}_{k \text{\: ``naan&quot;s total}}</span></p></li>
<li><p>curry with naan</p></li>
</ol>
<p>The total number of occurrences of “naan" in document 1 is <span
class="math inline">k</span>, so the total number of terms in document 1
is <span class="math inline">k + 2</span>, where <span
class="math inline">k \geq 3</span> is some positive integer. Note that
the two documents above are the only two documents in the corpus,
meaning that there are 5 unique terms total in the corpus.</p>
<p><br></p>
<h3 id="problem-10.1">Problem 10.1</h3>
<p>Given that the cosine similarity between the bag-of-words vector
representations of the two documents is <span
class="math inline">\displaystyle \frac{5}{9}</span>, what is the value
of <span class="math inline">k</span>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> 3 ( ) 4 ( ) 5 ( ) 6 ( ) 7 ( ) 8 ( ) 9 ( ) 10</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_1" aria-expanded="true" aria-controls="collapse10_1">
Click to view the solution.
</button>
</h2>
<div id="collapse10_1" class="accordion-collapse collapse"
aria-labelledby="heading10_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-10.2">Problem 10.2</h3>
<p>In this part, assume we are using a base-2 logarithm.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_2" aria-expanded="true" aria-controls="collapse10_2">
Click to view the solution.
</button>
</h2>
<div id="collapse10_2" class="accordion-collapse collapse"
aria-labelledby="heading10_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-10.3">Problem 10.3</h3>
<p>This part is independent of the previous parts.</p>
<p>In practice, you’ll encounter lots of new metrics and formulas that
you need to make sense of on the job. For instance, the
<strong>Wolverine Score (WS)</strong>, defined below, is an alternative
to the TF-IDF that also tries to quantify the importance of a term <span
class="math inline">t</span> to a document <span
class="math inline">d</span>, given a corpus of documents <span
class="math inline">d_1, d_2, ..., d_n</span>.</p>
<p><span class="math display">\text{WS}(t, d) = \left( \frac{\text{total
# of terms in $d$}}{\text{# of occurrences of $t$ in $d$}} \right)
\cdot   \left( \frac{\sum_{i=1}^n \text{# of occurrences of $t$ in
$d_i$}}{\sum_{i=1}^n \text{total # of terms in $d_i$}}\right)</span></p>
<p>Fill in the blank to complete the statement below.</p>
<p>“If <code>____</code>, then term <span class="math inline">t</span>
is more common in document <span class="math inline">d</span> than it is
across the entire corpus, and so <span class="math inline">t</span> is
likely an important term in <span class="math inline">d</span>."</p>
<p>What goes in the blank?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &lt; 0</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &gt; 0</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &lt; 1</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &gt; 1</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &lt; \frac{1}{n}</span>,
where <span class="math inline">n</span> is the number of documents in
the corpus</p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &gt; \frac{1}{n}</span>,
where <span class="math inline">n</span> is the number of documents in
the corpus</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_3" aria-expanded="true" aria-controls="collapse10_3">
Click to view the solution.
</button>
</h2>
<div id="collapse10_3" class="accordion-collapse collapse"
aria-labelledby="heading10_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-11">Problem 11</h2>
<p>The HTML document below contains the items on Wolverine Flavors
Express’ menu. We’ve only shown three menu items, but there are many
more, as indicated by the ellipses <code>...</code></p>
<pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Wolverine Flavors Express: A2&#39;s Favorite Indian Spot&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Wolverine Flavors Express Menu&lt;/h1&gt;
        &lt;div class=&quot;meta&quot;&gt;Last Updated February 25, 2025&lt;/div&gt;
        &lt;div class=&quot;menu-item&quot; data-price=&quot;14.99&quot; data-calories=&quot;650&quot;&gt;
            &lt;h2&gt;Butter Chicken&lt;/h2&gt;
            &lt;p&gt;Tender chicken in creamy tomato sauce - $14.99&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;menu-item&quot; data-price=&quot;12.99&quot; data-calories=&quot;480&quot;&gt;
            &lt;h2&gt;Chana Masala&lt;/h2&gt;
            &lt;p&gt;Spiced chickpea curry - $12.99 ($11.99 on Tuesday)&lt;/p&gt;
        &lt;/div&gt;
        ...
        &lt;div class=&quot;menu-item&quot; data-price=&quot;21.99&quot; data-calories=&quot;1050&quot;&gt;
            &lt;h2&gt;Chicken 65 Biryani&lt;/h2&gt;
            &lt;p&gt;Spicy chicken marinated with rice - $21.99 (special)&lt;/p&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>Suppose we define <code>soup</code> to be a BeautifulSoup object that
is instantiated using the HTML document above. Fill in the blanks below
so that <code>low_cals</code> contains the names of the menu items with
less than 500 calories.</p>
<pre><code>low_cals = []
for x in __(i)__:
    if __(ii)__:
        low_cals.append(__(iii)__)</code></pre>
<table>
<tbody>
<tr>
<td style="text-align: left;"><code>(i)</code>:</td>
<td></td>
</tr>
<tr>
<td style="text-align: left;"><code>(ii)</code>:</td>
<td></td>
</tr>
<tr>
<td style="text-align: left;"><code>(iii)</code>:</td>
<td></td>
</tr>
</tbody>
</table>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11" aria-expanded="true" aria-controls="collapse11">
Click to view the solution.
</button>
</h2>
<div id="collapse11" class="accordion-collapse collapse"
aria-labelledby="heading11" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-12">Problem 12</h2>
<p>When we originally downloaded the <code>orders</code> dataset from
the internet, some of the values in the <code>"minutes"</code> columns
were formatted incorrectly as strings with two decimals in them. To
clean the data, we implemented the function <code>clean_minutes</code>,
which takes in an invalid minutes value as a string and returns a
correctly formatted minutes value as a float. Example behavior of
<code>clean_minutes</code> is given below.</p>
<pre><code>&gt;&gt;&gt; clean_minutes(&quot;8.334.108&quot;)
83.34
&gt;&gt;&gt; clean_minutes(&quot;5.123.999&quot;)
51.23
&gt;&gt;&gt; clean_minutes(&quot;12.091.552&quot;)
120.91
&gt;&gt;&gt; clean_minutes(&quot;525.345.262&quot;)
5253.45</code></pre>
<p>As a helper function, we implemented the function
<code>split_pieces</code>; example behavior is given below.</p>
<pre><code>&gt;&gt;&gt; split_pieces(&quot;8.334.108&quot;)
(&quot;8&quot;, &quot;334&quot;)
&gt;&gt;&gt; split_pieces(&quot;12.091.552&quot;)
(&quot;12&quot;, &quot;091&quot;)</code></pre>
<p>Fill in the blanks to complete the implementations of the functions
<code>split_pieces</code> and <code>clean_minutes</code> so that they
behave as described above. Assume that the inputs to both functions are
formatted like in the examples above, i.e. that there are exactly 3
digits between the middle two decimals.</p>
<pre><code>def split_pieces(s):
    return re.findall(__(i)__, s)[0]

def clean_minutes(s):   
    p = split_pieces(s)
    return __(ii)__</code></pre>
<table>
<tbody>
<tr>
<td style="text-align: left;"><code>(i)</code>: <code>r"</code></td>
<td style="text-align: left;"><code>"</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>(ii)</code>:</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12" aria-expanded="true" aria-controls="collapse12">
Click to view the solution.
</button>
</h2>
<div id="collapse12" class="accordion-collapse collapse"
aria-labelledby="heading12" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-13">Problem 13</h2>
<p>Suppose we’d like to fit a constant model, <span
class="math inline">H(x_i) = h</span>, to predict the number of minutes
a delivery will take. To find the optimal constant prediction, <span
class="math inline">h^*</span>, we decide to use the <strong><span
class="math inline">\alpha \beta</span>-balanced</strong> loss function,
defined below:</p>
<p><span class="math display">L_{\alpha \beta}(y_i, h) = (\alpha y_i -
\beta h)^2</span></p>
<p>where <span class="math inline">\alpha</span> and <span
class="math inline">\beta</span> are both constants, and <span
class="math inline">\beta \neq 0</span>.</p>
<p>Below, assume <span class="math inline">\bar{y} = \frac{1}{n} \sum_{i
= 1}^n y_i</span> is the mean number of minutes a delivery took.</p>
<p><br></p>
<h3 id="problem-13.1">Problem 13.1</h3>
<p>Suppose <span class="math inline">\alpha = 3</span> and <span
class="math inline">\beta = 3</span>, so <span
class="math inline">L_{\alpha \beta}(y_i, h) = (3y_i - 3h)^2</span>.</p>
<p>What is the optimal constant prediction, <span
class="math inline">h^*</span>, that minimizes average <span
class="math inline">\alpha \beta</span>-balanced loss?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">\bar{y}</span> ( ) <span class="math inline">\frac{1}{2} \bar{y}</span> ( ) <span class="math inline">2 \bar{y}</span> ( )</p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">3 \bar{y}</span> ( ) <span class="math inline">\frac{1}{6} \bar{y}</span> ( )</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_1" aria-expanded="true" aria-controls="collapse13_1">
Click to view the solution.
</button>
</h2>
<div id="collapse13_1" class="accordion-collapse collapse"
aria-labelledby="heading13_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-13.2">Problem 13.2</h3>
<p>Suppose <span class="math inline">\alpha = 6</span> and <span
class="math inline">\beta = 3</span>, so <span
class="math inline">L_{\alpha \beta}(y_i, h) = (6y_i - 3h)^2</span>.</p>
<p>What is the optimal constant prediction, <span
class="math inline">h^*</span>, that minimizes average <span
class="math inline">\alpha \beta</span>-balanced loss?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">\bar{y}</span> ( ) <span class="math inline">\frac{1}{2} \bar{y}</span> ( ) <span class="math inline">2 \bar{y}</span> ( )</p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">3 \bar{y}</span> ( ) <span class="math inline">\frac{1}{6} \bar{y}</span> ( )</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_2" aria-expanded="true" aria-controls="collapse13_2">
Click to view the solution.
</button>
</h2>
<div id="collapse13_2" class="accordion-collapse collapse"
aria-labelledby="heading13_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-13.3">Problem 13.3</h3>
<p>Find the optimal constant prediction, <span
class="math inline">h^*</span>, that minimizes average <span
class="math inline">\alpha \beta</span>-balanced loss <strong>in
general</strong>, for any valid choice of <span
class="math inline">\alpha</span> and <span
class="math inline">\beta</span>. Show your work, and <span
class="math inline">\boxed{\text{box}}</span> your final answer, which
should be an expression involving <span
class="math inline">\bar{y}</span>, <span
class="math inline">\alpha</span>, <span
class="math inline">\beta</span>, and/or other constants.</p>
<div class="responsebox">
<p>4in</p>
</div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_3" aria-expanded="true" aria-controls="collapse13_3">
Click to view the solution.
</button>
</h2>
<div id="collapse13_3" class="accordion-collapse collapse"
aria-labelledby="heading13_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-14">Problem 14</h2>
<p>Suppose we’d like to predict the number of minutes a delivery will
take (<span class="math inline">y</span>) as a function of distance
(<span class="math inline">x</span>). To do so, we look to our dataset
of <span class="math inline">n</span> deliveries, <span
class="math inline">(x_1, y_1), (x_2, y_2), ..., (x_n, y_n)</span>, and
fit two simple linear models:</p>
<ul>
<li><p><span class="math inline">F(x_i) = a_0 + a_1 x_i</span>, where:
<span class="math display">a_1 = r \frac{\sigma_y}{\sigma_x}, \qquad a_0
= \bar{y} - r \frac{\sigma_y}{\sigma_x} \bar{x}</span></p>
<p>Here, <span class="math inline">r</span> is the correlation
coefficient between <span class="math inline">x</span> and <span
class="math inline">y</span>, <span class="math inline">\bar{x}</span>
and <span class="math inline">\bar{y}</span> are the means of <span
class="math inline">x</span> and <span class="math inline">y</span>,
respectively, and <span class="math inline">\sigma_x</span> and <span
class="math inline">\sigma_y</span> are the standard deviations of <span
class="math inline">x</span> and <span class="math inline">y</span>,
respectively.</p></li>
<li><p><span class="math inline">G(x_i) = b_0 + b_1 x_i</span>, where
<span class="math inline">b_0</span> and <span
class="math inline">b_1</span> are chosen such that the line <span
class="math inline">G(x_i) = b_0 + b_1 x_i</span> minimizes <strong>mean
absolute error</strong> on the dataset. Assume that no other line
minimizes mean absolute error on the dataset, i.e. that the values of
<span class="math inline">b_0</span> and <span
class="math inline">b_1</span> are unique.</p></li>
</ul>
<p><br></p>
<h3 id="problem-14.1">Problem 14.1</h3>
<p>Fill in the : <span class="math display">\displaystyle \sum_{i = 1}^n
(y_i - G(x_i))^2 \:\:\: \boxed{???} \:\:\: \sum_{i = 1}^n (y_i -
F(x_i))^2</span> ( ) <span class="math inline">\geq</span> ( ) <span
class="math inline">&gt;</span> ( ) <span class="math inline">=</span> (
) <span class="math inline">&lt;</span> ( ) <span
class="math inline">\leq</span> ( ) Impossible to tell</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_1" aria-expanded="true" aria-controls="collapse14_1">
Click to view the solution.
</button>
</h2>
<div id="collapse14_1" class="accordion-collapse collapse"
aria-labelledby="heading14_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-14.2">Problem 14.2</h3>
<p>Fill in the : <span class="math display">\displaystyle \left( \sum_{i
= 1}^n \big| y_i - G(x_i) \big| \right)^2 \:\:\: \boxed{???} \:\:\:
\left( \sum_{i = 1}^n \big| y_i - F(x_i) \big| \right)^2</span> ( )
<span class="math inline">\geq</span> ( ) <span
class="math inline">&gt;</span> ( ) <span class="math inline">=</span> (
) <span class="math inline">&lt;</span> ( ) <span
class="math inline">\leq</span> ( ) Impossible to tell</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_2" aria-expanded="true" aria-controls="collapse14_2">
Click to view the solution.
</button>
</h2>
<div id="collapse14_2" class="accordion-collapse collapse"
aria-labelledby="heading14_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-14.3">Problem 14.3</h3>
<p>Below, we’ve drawn both lines, <span class="math inline">F</span>,
and <span class="math inline">G</span>, along with a scatter plot of the
original <span class="math inline">n</span> deliveries.</p>
<div class="center">
<figure>
<img src="midterm-images/regression.png" style="width:50.0%"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
</div>
<p>Which line corresponds to line <strong><span
class="math inline">F</span></strong>? ( ) Line 1 ( ) Line 2</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_3" aria-expanded="true" aria-controls="collapse14_3">
Click to view the solution.
</button>
</h2>
<div id="collapse14_3" class="accordion-collapse collapse"
aria-labelledby="heading14_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-15">Problem 15</h2>
<p>[(0.5 pts; extra credit)]</p>
<p>In Question 7, assuming that there are 100 unique drivers, what is
the true, theoretical probability that <code>"WOLVAA01"</code> wins a
free gift card? Show your work, and your final answer, which should be a
<strong>fraction</strong>.</p>
<p>Don’t spend time on this question if you haven’t attempted all other
questions, as it is purely for (very little) extra credit.</p>
<div class="responsebox">
<p>3in</p>
</div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading15">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse15" aria-expanded="true" aria-controls="collapse15">
Click to view the solution.
</button>
</h2>
<div id="collapse15" class="accordion-collapse collapse"
aria-labelledby="heading15" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
</div>
</div>
</div>
</div>
<hr />
<h2 id="section"><span class="math display"> </span></h2>
<h4
id="feedback-find-an-error-still-confused-have-a-suggestion-let-us-know-here.">👋
Feedback: Find an error? Still confused? Have a suggestion? Let us know
<a href="https://forms.gle/xK4DpWXh9rq8AKP37">here</a>.</h4>
<hr />
</body>
</html>

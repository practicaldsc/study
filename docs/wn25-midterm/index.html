<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Winter 2025 Midterm Exam</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../assets/theme.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Winter 2025 Midterm Exam</h1>
</header>
<p><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- add after bootstrap.min.css -->
<link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css"/>
<!-- add after bootstrap.min.js or bootstrap.bundle.min.js -->
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script></p>
<!-- for difficulty gauges-->
<script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-B947E6J6H4"></script> -->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  // gtag('js', new Date());

  // gtag('config', 'G-B947E6J6H4');
</script>
<p><a href="../index.html">← return to study.practicaldsc.org</a></p>
<hr />
<p><strong>Instructor(s):</strong> Suraj Rampure</p>
<p>This exam was administered in-person. The exam was closed-notes,
except students were allowed to bring a single two-sided notes sheet. No
calculators were allowed. Students had 120 minutes to take this exam.
<br><br>Access the original exam PDF
<a href="../assets/pdf/wn25-midterm.pdf">here</a>.</p>
<hr />
<div class="center">
<p><strong>Data Overview: Food Deliveries</strong></p>
</div>
<p>In this exam, we’ll work with the DataFrame <code>orders</code>,
which contains information about deliveries made using various food
delivery services in India.</p>
<p>The first few rows of <code>orders</code> are shown below, but
<code>orders</code> has many more rows than are shown.</p>
<center><img src="../assets/images/wn25-midterm/df.png" width=800></center>
<p>Each row in <code>orders</code> contains information about a single
delivery. The columns in <code>orders</code> are as follows:</p>
<ul>
<li><p><code>"driver" (str)</code>: The delivery driver’s ID. Note that
there are duplicate values in this column, because some drivers have
made multiple deliveries.</p></li>
<li><p><code>"type" (str)</code>: The type of food ordered; either
<code>"Buffet"</code>, <code>"Drinks"</code>, <code>"Meal"</code>, or
<code>"Snack"</code>.</p></li>
<li><p><code>"rating" (float)</code>: The average rating of the driver
out of 5, <strong>after</strong> making the given delivery.</p></li>
<li><p><code>"dist" (float)</code>: The distance from the restaurant to
the delivery address, in kilometers.</p></li>
<li><p><code>"traffic" (str)</code>: The level of traffic; either
<code>"High"</code>, <code>"Low"</code>, <code>"Moderate"</code>, or
<code>"Very High"</code>.</p></li>
<li><p><code>"minutes" (float)</code>: The time in minutes between when
a customer places their order and when they receive it.</p></li>
</ul>
<p><strong>Throughout the exam</strong>, assume we have already run all
necessary import statements.</p>
<p><strong>Make sure you have read the Data Overview before
beginning!</strong></p>
<hr />
<h2 id="problem-1">Problem 1</h2>
<p>Driver <code>"WOLVAA01"</code> has made several deliveries. Write an
expression that evaluates to the number of minutes
<code>"WOLVAA01"</code> took to deliver their
<strong>second</strong>-fastest order.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="true" aria-controls="collapse1">
Click to view the solution.
</button>
</h2>
<div id="collapse1" class="accordion-collapse collapse"
aria-labelledby="heading1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:</p>
<div id="cb1" class="sourceCode">
<pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a>    orders.loc[orders[<span class="st">"driver"</span>] <span class="op">==</span> <span class="st">"WOLVAA01"</span>, <span class="st">"minutes"</span>].sort_values().iloc[<span class="dv">1</span>] </span></code></pre>
</div>
<p>or</p>
<div id="cb2" class="sourceCode">
<pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1" tabindex="-1"></a>    orders.loc[orders[<span class="st">"driver"</span>] <span class="op">==</span> <span class="st">"WOLVAA01"</span>, <span class="st">"minutes"</span>].sort_values(ascending<span class="op">=</span><span class="va">False</span>).iloc[<span class="op">-</span><span class="dv">2</span>]</span></code></pre>
</div>
<p><code>loc</code> helps us extract a subset of the rows and columns in
a DataFrame. In general, <code>loc</code> works as follows:</p>
<pre><code>    orders.loc[&lt;subset of rows&gt;, &lt;subset of columns&gt;]</code></pre>
<p>Here:</p>
<ul>
<li><p>We want all of the rows where <code>orders["driver"]</code> is
equal to <code>"WOLVAA01"</code>, so we use the expression
<code>orders["driver"] == "WOLVAA01"</code> as the first input to
<code>loc</code>. (Remember, <code>orders["driver"] == "WOLVAA01"</code>
is a Series of <code>True</code>s and <code>False</code>s; only the
<code>True</code> values are kept in the result.)</p></li>
<li><p>We want just the column <code>"minutes"</code>, so we supply it
as a string as the second input to <code>loc</code>.</p></li>
</ul>
<p>Now, we have a Series with the minutes of all orders that
<code>"WOLVAA01"</code> has reviewed; calling the
<code>.sort_values()</code> method on this Series will give us back
another Series with the minutes of the orders sorted by default in
ascending order. Since we are looking for the second fastest order, we
can then use <code>iloc</code> to extract this value. As Python is
zero-indexed this value will be 1.</p>
<p>Similarly, if you specify <code>ascending=False</code> as a parameter
to <code>.sort_values()</code>, the orders will be sorted in descending
order with the order taking the longest amount of time being on top. In
such a case, we would want to extract the second last element from the
series.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-2">Problem 2</h2>
<p>Drivers’ ratings can change over time, as they perform more and more
deliveries. For instance, after one delivery a driver’s rating might be
4.8, and after their next delivery it might drop to 4.7. We say a driver
is <em>consistent</em> if their rating was the <strong>exact
same</strong> for all of their deliveries in <code>orders</code>.</p>
<p>Fill in the blanks so <code>prop_consistent</code> below evaluates to
a float, corresponding to the <strong>proportion of drivers</strong> who
are consistent.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> f(x):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> __(iv)__</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>    prop_consistent <span class="op">=</span> (</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>     orders</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>     .groupby(__(i)__)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>     [__(ii)__]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>     .__(iii)__(f)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>     .mean()</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="true" aria-controls="collapse2">
Click to view the solution.
</button>
</h2>
<div id="collapse2" class="accordion-collapse collapse"
aria-labelledby="heading2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:</p>
<ul>
<li><p>(i): <code>"Driver"</code>. We use <code>groupby("Driver")</code>
because we want to check the consistency of ratings for <strong>each
individual driver</strong>. By grouping by <code>"Driver"</code>, we are
able to look at each driver’s set of ratings across their
deliveries.</p></li>
<li><p>(ii): <code>"rating"</code>. We want to check whether all
<code>"rating"</code> values for a given <code>"Driver"</code> are the
same. To do so, we’ll need to look at a Series of <code>"rating"</code>
values for each <code>"Driver"</code>, so that’s the column we extract
here.</p></li>
<li><p>(iii): <code>agg</code>. The <code>agg</code> method allows us to
apply an aggregation function to each group (each <code>"Driver"</code>
in this case). This is necessary because we are checking a condition
across an entire group of ratings rather than filtering individual rows.
It’s also worth noting that since <code>.mean()</code> is used at the
end, the <code>agg</code> step must be producing a series of Boolean
values (<code>True</code> or <code>False</code>), one for each
<code>"Driver"</code>. Each value represents whether that
<strong>driver’s ratings are consistent</strong>.</p></li>
<li><p>(iv): <code>x.max() == x.min() or x.nunique() == 1</code>. This
is the Boolean statement used in the <code>f</code> function to check
whether a <code>"Driver"</code>’s ratings are consistent.
<code>x.max() == x.min()</code> confirms that all ratings are identical,
since both the maximum and minimum must be the same if no variation
exists. <code>x.nunique() == 1</code> achieves the same goal by checking
directly whether there is only one unique rating. Either approach is
valid, and there are several other possibilities too, such as checking
<code>x.std() == 0</code> or using
<code>x.eq(x.iloc[0]).all()</code>.</p></li>
</ul>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-3">Problem 3</h2>
<p>Suppose the expression below evaluates to <code>1</code>.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(orders[orders[<span class="st">&quot;type&quot;</span>] <span class="op">==</span> <span class="st">&quot;Snack&quot;</span>][<span class="st">&quot;driver&quot;</span>]</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a> .value_counts()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a> .value_counts()</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a> .shape[<span class="dv">0</span>]</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>What can we conclude about <code>orders</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Every driver made at least 1 <code>"Snack"</code> delivery.</p></li>
<li><p><input type="radio" disabled="" /> Every driver made exactly 1 <code>"Snack"</code> delivery.</p></li>
<li><p><input type="radio" disabled="" /> Every driver made at most 1 <code>"Snack"</code> delivery.</p></li>
<li><p><input type="radio" disabled="" /> Every driver made exactly <span class="math inline">k</span>
<code>"Snack"</code> deliveries, where <span class="math inline">k</span> is some positive constant.</p></li>
<li><p><input type="radio" disabled="" /> Every driver made exactly 0 or exactly <span class="math inline">k</span> <code>"Snack"</code> deliveries, where
<span class="math inline">k</span> is some positive constant.</p></li>
<li><p><input type="radio" disabled="" /> Every driver that made a <code>"Snack"</code> delivery did not make
any other kind of delivery.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3" aria-expanded="true" aria-controls="collapse3">
Click to view the solution.
</button>
</h2>
<div id="collapse3" class="accordion-collapse collapse"
aria-labelledby="heading3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: Every driver made exactly 0 or exactly <span class="math inline">k</span> <code>"Snack"</code> deliveries, where
<span class="math inline">k</span> is some positive constant.</p>
<p>The expression runs a query on the <code>orders</code> DataFrame,
selecting only rows where the <code>"type"</code> is equal to
<code>"Snack"</code>. This narrows the focus to the set of deliveries
that were for <code>"Snack"</code> items. The code then selects the
<code>"driver"</code> column to identify which driver handled each
<code>"Snack"</code> delivery.</p>
<p>The first <code>.value_counts()</code> computes how many
<code>"Snack"</code> deliveries each <code>"driver"</code> made. The
second <code>.value_counts()</code> then counts how many drivers made
each possible number of <code>"Snack"</code> deliveries.</p>
<p>Finally, <code>.shape[0]</code> measures how many distinct numbers of
<code>"Snack"</code> deliveries were made by drivers. Since the
expression evaluates to <code>1</code>, we can conclude that there is
only one distinct number of <code>"Snack"</code> deliveries made by
drivers. This implies that every driver either made exactly 0 or exactly
<span class="math inline">k</span> <code>"Snack"</code> deliveries.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-4">Problem 4</h2>
<p>In one English sentence, describe what the following expression
computes. Your sentence should start with “The driver” and should be
understandable by someone who has never written code before, i.e. it
should not use any technical terms.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(orders</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">&quot;Driver&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">filter</span>(<span class="kw">lambda</span> df: df.shape[<span class="dv">0</span>] <span class="op">&gt;=</span> <span class="dv">10</span> <span class="kw">and</span> df[<span class="st">&quot;rating&quot;</span>].<span class="bu">min</span>() <span class="op">&gt;=</span> <span class="fl">4.5</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">&quot;Driver&quot;</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    [<span class="st">&quot;minutes&quot;</span>]</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">sum</span>()</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    .idxmax()</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4" aria-expanded="true" aria-controls="collapse4">
Click to view the solution.
</button>
</h2>
<div id="collapse4" class="accordion-collapse collapse"
aria-labelledby="heading4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: The driver who has driven the most minutes
total, among all <code>"Driver"</code>s with at least 10 deliveries and
a minimum review rating of 4.5.</p>
<p>The expression first groups the data by the <code>"Driver"</code>
column. It then filters the groups to only include those where the
<code>"Driver"</code> has made at least 10 deliveries and has a minimum
<code>"rating"</code> of 4.5. Only <code>"Driver"</code>s who meet both
conditions are kept in the output.</p>
<p>After filtering, the data is grouped by <code>"Driver"</code> again,
and the total number of <code>"minutes"</code> each
<code>"Driver"</code> has driven is calculated. Finally,
<code>.idxmax()</code> identifies the <code>"Driver"</code> who has
driven the most <code>"minutes"</code> among all <code>"Driver"</code>s
that fit the two criteria above.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-5">Problem 5</h2>
<p>Consider the DataFrame <code>C</code>, defined below.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>C <span class="op">=</span> orders.pivot_table(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  index<span class="op">=</span><span class="st">&quot;type&quot;</span>,  <span class="co"># Possible values: &quot;Buffet&quot;, &quot;Drinks&quot;, &quot;Meal&quot;, &quot;Snack&quot;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  columns<span class="op">=</span><span class="st">&quot;traffic&quot;</span>,  <span class="co"># Possible values: &quot;High&quot;, &quot;Low&quot;, &quot;Moderate&quot;, &quot;Very Low&quot;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  values<span class="op">=</span><span class="st">&quot;minutes&quot;</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  aggfunc<span class="op">=</span><span class="st">&quot;count&quot;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Throughout this question, assume that after defining <code>C</code>
above, <strong>we sort <code>C</code> such that both its index and
columns are in ascending alphabetical order</strong> (as shown
above).</p>
<p><br></p>
<h3 id="problem-5.1">Problem 5.1</h3>
<p>Fill in the blanks so that the expression below evaluates to the
<strong>proportion of <code>"Snack"</code> deliveries that were made in
<code>"Moderate"</code> traffic</strong>. Each blank should be filled
with a single integer, float, string, or Boolean value.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>C.iloc[__(i)__, __(ii)__] <span class="op">/</span> C.loc[__(iii)__].<span class="bu">sum</span>()</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_1" aria-expanded="true" aria-controls="collapse5_1">
Click to view the solution.
</button>
</h2>
<div id="collapse5_1" class="accordion-collapse collapse"
aria-labelledby="heading5_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: There are multiple possible answers.</p>
<ul>
<li><p>(i): <code>3 or -1</code>. The index of <code>C</code> is sorted
alphabetically, meaning the row order follows <code>"Buffet"</code>,
<code>"Drinks"</code>, <code>"Meal"</code>, <code>"Snack"</code>. Since
<code>"Snack"</code> is the last item in this order, its index is 3
(0-based) or -1 (negative indexing).</p></li>
<li><p>(ii): <code>2 or -2</code>. Similarly, the columns are sorted
alphabetically: <code>"High"</code>, <code>"Low"</code>,
<code>"Moderate"</code>, <code>"Very Low"</code>.
<code>"Moderate"</code> appears third in this order, making its index 2
(0-based) or -2 (negative indexing).</p></li>
<li><p>(iii): <code>"Snack"</code>. To get the total number of
<code>"Snack"</code> deliveries across all traffic levels, we use
<code>C.loc["Snack"]</code>. The <code>.sum()</code> function then adds
up all values in that row.</p></li>
</ul>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-5.2">Problem 5.2</h3>
<p>Fill in the blanks so that the expression below evaluates to the
<strong>proportion of deliveries made in <code>"Low"</code> traffic that
were for <code>"Buffet"</code></strong>. Blanks (i) and (ii) should each
be filled with a single integer, float, string, or Boolean value.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>C.loc[__(i)__, __(ii)__] <span class="op">/</span> __(iii)__.<span class="bu">sum</span>()</span></code></pre></div>
<p>Options for (iii):</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>C.iloc[:, -1]</code></p></li>
<li><p><input type="radio" disabled="" /> <code>C.iloc[:, 0]</code></p></li>
<li><p><input type="radio" disabled="" /> <code>C.iloc[:, 1]</code></p></li>
<li><p><input type="radio" disabled="" /> <code>C.iloc[-1, :]</code></p></li>
<li><p><input type="radio" disabled="" /> <code>C.iloc[0, :]</code></p></li>
<li><p><input type="radio" disabled="" /> <code>C.iloc[1, :]</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading5_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5_2" aria-expanded="true" aria-controls="collapse5_2">
Click to view the solution.
</button>
</h2>
<div id="collapse5_2" class="accordion-collapse collapse"
aria-labelledby="heading5_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: - (i): <code>"Buffet"</code>. When using
<code>.loc</code>, we reference labels instead of numerical indices.
Since the index represents order <code>"type"</code> and is sorted
alphabetically (<code>"Buffet"</code>, <code>"Drinks"</code>,
<code>"Meal"</code>, <code>"Snack"</code>), <code>"Buffet"</code> is the
correct label for selecting the row corresponding to buffet orders.</p>
<ul>
<li><p>(ii): <code>"Low"</code>. Similarly, the column order is sorted
alphabetically as <code>"High"</code>, <code>"Low"</code>,
<code>"Moderate"</code>, <code>"Very Low"</code>, making
<code>"Low"</code> the correct column label to select deliveries in
<code>"Low"</code> traffic.</p></li>
<li><p>(iii): <code>C.iloc[:, 1]</code>. Here, we are using
<code>.iloc</code>, which is integer-location based indexing. The
<code>[:, 1]</code> part means we are selecting all rows
(<code>:</code>) in the second column (index 1), which corresponds to
<code>"Low"</code> traffic, since the columns are sorted alphabetically.
By selecting <code>C.iloc[:, 1]</code>, we are referencing all the
values in the <code>"Low"</code> column, and <code>.sum()</code> will
give the total number of deliveries made in <code>"Low"</code> traffic
across all order types.</p></li>
</ul>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-6">Problem 6</h2>
<p>Consider the DataFrames <code>A</code> and <code>B</code>, shown
below in their entirety.</p>
<center>
<img src="../assets/images/wn25-midterm/A.png" width=40%>
<img src="../assets/images/wn25-midterm/B.png" width=40%>
</center>
<p>Note that the <code>"type"</code> value in row <strong>3</strong> of
DataFrame <code>B</code> is unknown.<br />
Remember from the Data Overview page that the only possible values in
the <code>"type"</code> column are <code>"Buffet"</code>,
<code>"Drinks"</code>, <code>"Meal"</code>, and
<code>"Snack"</code>.</p>
<p><br></p>
<h3 id="problem-6.1">Problem 6.1</h3>
<p>Suppose the DataFrame <code>A.merge(B, on="type")</code> has 7
rows.</p>
<p>What must the unknown value, <span
class="math inline">\boxed{\text{???}}</span>, be?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>"Drinks"</code></p></li>
<li><p><input type="radio" disabled="" /> <code>"Buffet"</code></p></li>
<li><p><input type="radio" disabled="" /> <code>"Meal"</code></p></li>
<li><p><input type="radio" disabled="" /> <code>"Snack"</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_1" aria-expanded="true" aria-controls="collapse6_1">
Click to view the solution.
</button>
</h2>
<div id="collapse6_1" class="accordion-collapse collapse"
aria-labelledby="heading6_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>"Drinks"</code></p>
<p>Given that the resulting DataFrame after the merge has 7 rows, this
means that there are 7 matches between the rows in A and B based on the
<code>"type"</code> column. The value in the third row of DataFrame B is
unknown. We need to figure out which value for <code>"type"</code> will
give exactly 7 matches when merged with A.</p>
<p>Since merging on <code>"type"</code> generates rows where both
DataFrames have the same <code>"type"</code>, we need to look at the
counts of each type in A and B to deduce which value the unknown
<code>"type"</code> should be. We can see that there are 5 rows with
type <code>"Buffet"</code> in DataFrame A and 1 row with type
<code>"Buffet"</code> in DataFrame B. This means in our merged dataset
we will have at least 5 rows of <code>"Buffet"</code>.</p>
<p>We can then go through each of the different options to see which
option will give us exactly 7 rows in our merged dataset. If the unknown
value is:</p>
<ul>
<li><p><strong>Drinks</strong>: We have 2 rows with type
<code>"Drinks"</code> in DataFrame A and 1 row with type
<code>"Drinks"</code> (unknown value replaced) in DataFrame B, which
gives us <span class="math inline">2 \times 1 = 2</span> rows in our
merged dataset. This is the correct answer because now we will have 5
(Buffet rows) + 2 (Drinks rows) = 7 rows in the merged dataset.</p></li>
<li><p><strong>Buffet</strong>: We have 5 rows of <code>"Buffet"</code>
in DataFrame A and 2 rows in DataFrame B, which gives us <span class="math inline">2 \times 5 = 10</span> rows in our merged
dataset.</p></li>
<li><p><strong>Meal</strong>: We have 0 rows of <code>"Meal"</code> in
DataFrame A and 2 row in DataFrame B, which gives us <span class="math inline">0 \times 2 = 0</span> row in our merged
dataset.</p></li>
<li><p><strong>Snack</strong>: We have 0 rows of <code>"Snack"</code> in
DataFrame A and 3 rows in DataFrame B, which gives us <span class="math inline">0 \times 3 = 0</span> rows in our merged dataset.
This is the correct answer because now we will have exactly 10 rows (all
Buffet rows) in total.</p></li>
</ul>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-6.2">Problem 6.2</h3>
<p>Suppose the DataFrame <code>A.merge(B, on="type")</code> has 10
rows.</p>
<p>What must the unknown value, <span
class="math inline">\boxed{\text{???}}</span>, be?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <code>"Drinks"</code></p></li>
<li><p><input type="radio" disabled="" /> <code>"Buffet"</code></p></li>
<li><p><input type="radio" disabled="" /> <code>"Meal"</code></p></li>
<li><p><input type="radio" disabled="" /> <code>"Snack"</code></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_2" aria-expanded="true" aria-controls="collapse6_2">
Click to view the solution.
</button>
</h2>
<div id="collapse6_2" class="accordion-collapse collapse"
aria-labelledby="heading6_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>"Buffet"</code></p>
<p>Using the same logic as in the solution to 6.1, if the unknown value
is <code>"Buffet"</code>, the merged dataset will include:</p>
<ul>
<li><code>5</code> (<code>Buffet rows from A</code>) * <code>2</code>
(<code>Buffet rows from B</code>) = <code>10</code> rows.</li>
</ul>
<p>This matches the stated total, so the unknown must be
<code>"Buffet"</code>.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-6.3">Problem 6.3</h3>
<p>Suppose the DataFrame <code>A.merge(B, on="type", how="outer")</code>
has <span class="math inline">k</span> rows.<br />
The value of <span class="math inline">k</span> depends on the unknown
value, <span class="math inline">\boxed{\text{???}}</span>.</p>
<p>Which integer below <strong>cannot</strong> be <span
class="math inline">k</span>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> 11</p></li>
<li><p><input type="radio" disabled="" /> 12</p></li>
<li><p><input type="radio" disabled="" /> 14</p></li>
<li><p><input type="radio" disabled="" /> 16</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_3" aria-expanded="true" aria-controls="collapse6_3">
Click to view the solution.
</button>
</h2>
<div id="collapse6_3" class="accordion-collapse collapse"
aria-labelledby="heading6_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>14</code></p>
<p>We can replace the unknown value with each type and compute how many
rows we expect to see in the final dataset after an outer merge:</p>
<ul>
<li>If the unknown value is <strong>Drinks</strong>: We will have 2
(Drinks rows) + 5 (Buffet rows) + 2 (Meal rows) + 2 (Snack rows) = 11
rows.</li>
<li>If the unknown value is <strong>Buffet</strong>: We will have 10
(Buffet rows) + 2 (Drink rows from DataFrame A) + 2 (Meal rows) + 2
(Snack rows) = 16 rows.</li>
<li>If the unknown value is <strong>Meal</strong>: We will have 3 (Meal
rows) + 5 (Buffet rows) + 2 (Drink rows) + 2 (Snack rows) = 12
rows.</li>
<li>If the unknown value is <strong>Snack</strong>: We will have 3
(Snack rows) + 5 (Buffet rows) + 2 (Meal rows) + 2 (Meal rows) = 12
rows.</li>
</ul>
<p>Thus, the only possible number of rows that <strong>cannot</strong>
occur is <strong>14</strong>.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-6.4">Problem 6.4</h3>
<p>Suppose the unknown value, <span
class="math inline">\boxed{\text{???}}</span>, is
<code>"Buffet"</code>.</p>
<p>How many rows are in the DataFrame
<code>A.merge(B, on=["type", "rating"])</code>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> 0</p></li>
<li><p><input type="radio" disabled="" /> 1</p></li>
<li><p><input type="radio" disabled="" /> 2</p></li>
<li><p><input type="radio" disabled="" /> 3</p></li>
<li><p><input type="radio" disabled="" /> 4</p></li>
<li><p><input type="radio" disabled="" /> 5</p></li>
<li><p><input type="radio" disabled="" /> 6</p></li>
<li><p><input type="radio" disabled="" /> 7</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading6_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse6_4" aria-expanded="true" aria-controls="collapse6_4">
Click to view the solution.
</button>
</h2>
<div id="collapse6_4" class="accordion-collapse collapse"
aria-labelledby="heading6_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>2</code></p>
<p>When merging on both <code>"type"</code> and <code>"rating"</code>,
only exact matches in both columns will contribute to the result. Since
the unknown value is <code>"Buffet"</code>, the only matching
combination is <code>"Buffet"</code> with rating <code>4.6</code>, which
appears once in each DataFrame.</p>
<p>Thus, the total number of rows is
<code>1 (from A) * 1 (from B) = 1</code> per matching pair, and if both
datasets hold one each, the result has <code>2</code> rows.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-7">Problem 7</h2>
<p>The delivery company wants to reward a subset of its drivers with a
gift card for their service. To do so, they:</p>
<ol type="1">
<li><p>Choose an integer <span class="math inline">k</span> between 1
and 10 inclusive, uniformly at random.</p></li>
<li><p>Choose <span class="math inline">k</span> <strong>unique</strong>
drivers, uniformly at random, such that all drivers have the same chance
of being chosen, no matter how many deliveries they have made. Note that
a driver cannot be selected more than once.</p></li>
</ol>
<p>Driver <code>"WOLVAA01"</code> asks ChatGPT to write code that
simulates the probability that he wins a gift card, and it gives him
back the following:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>    drivers <span class="op">=</span> orders[<span class="st">&quot;driver&quot;</span>].unique()</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> choose_k():</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> np.random.choice(np.arange(<span class="dv">1</span>, <span class="dv">11</span>))</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> one_sim(k):</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        selected <span class="op">=</span> np.array([])</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(k):</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>            selectee <span class="op">=</span> np.random.choice(drivers, <span class="dv">1</span>, replace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>            selected <span class="op">=</span> np.append(selected, selectee)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;WOLVAA01&quot;</span> <span class="kw">in</span> selected</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> simulation():</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        k <span class="op">=</span> choose_k()</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        N <span class="op">=</span> <span class="dv">100_000</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>            total <span class="op">=</span> total <span class="op">+</span> one_sim(k)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> total <span class="op">/</span> N</span></code></pre></div>
<p><code>simulation()</code> <em>should</em> return an estimate of the
probability that <code>"WOLVAA01"</code> wins a gift card, but some of
the code is potentially buggy. <strong>Select all issues</strong> with
the code above.</p>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> <code>drivers</code> only includes the drivers that made one
delivery, rather than all drivers.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>choose_k</code> returns a random integer between <code>1</code>
and <code>11</code>, instead of one from <code>1</code> to
<code>10</code>.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>choose_k</code> always returns the same number.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>one_sim</code> draws <code>k</code> drivers with replacement,
instead of without replacement.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>one_sim</code> draws <code>k</code> drivers without
replacement, instead of with replacement.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>one_sim</code> always returns <code>False</code>, because
<code>selected</code> is always an empty array.</p></li>
<li><p><input type="checkbox" disabled="" /> <code>simulation</code> only picks one value of <code>k</code>, when
it should select a new <code>k</code> on each iteration.</p></li>
<li><p><input type="checkbox" disabled="" /> None of the above.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading7">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse7" aria-expanded="true" aria-controls="collapse7">
Click to view the solution.
</button>
</h2>
<div id="collapse7" class="accordion-collapse collapse"
aria-labelledby="heading7" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Correct answers</strong>:</p>
<ul>
<li><code>one_sim</code> draws <code>k</code> drivers with replacement,
instead of without replacement</li>
<li><code>simulation</code> only picks one value of <code>k</code>, when
it should select a new <code>k</code> on each iteration</li>
</ul>
<p><strong><code>one_sim</code> draws <code>k</code> drivers with
replacement, instead of without replacement</strong></p>
<p>Because <code>np.random.choice()</code> is called separately each
time within the for loop, there is no guarantee that all k chosen
drivers will be distinct across iterations. Which means that some
drivers might be picked more than once, violating the “unique drivers”
requirement. The correct way to choose the k drivers would be -</p>
<div id="cb1" class="sourceCode">
<pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a>np.random.choice(drivers, k, replace<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
<p><strong><code>simulation</code> only picks one value of
<code>k</code>, when it should select a new <code>k</code> on each
iteration</strong></p>
<p>The code defines k once at the beginning of simulation() using
<code>choose_k()</code>. This means that the same value of k is used for
all iterations of the simulation. However, as per the problem statement,
k should be chosen anew on each iteration of the simulation. Therefore,
the function <code>choose_k()</code> should be called within the loop to
select a random k for each iteration.</p>
<p>Now, for the other options:</p>
<ul>
<li><p><strong><code>drivers</code> only includes the drivers that made
one delivery, rather than all drivers</strong></p>
<p><code>orders["driver"].unique()</code> returns all unique drivers,
regardless of how many deliveries they made, so this issue doesn’t exist
in the code.</p></li>
<li><p><strong><code>choose_k</code> returns a random integer between
<code>1</code> and <code>11</code>, instead of one from <code>1</code>
to <code>10</code></strong></p>
<p><code>np.random.choice(np.arange(1, 11))</code> correctly selects a
random integer from 1 to 10 (inclusive), so this is not an
issue.</p></li>
<li><p><strong><code>choose_k</code> always returns the same
number</strong></p>
<p><code>choose_k()</code> generates a random number between 1 and 10
every time it is called. Therefore, it does not always return the same
number.</p></li>
<li><p><strong><code>one_sim</code> always returns <code>False</code>,
because <code>selected</code> is always an empty array</strong></p>
<p>The array <code>selected</code> is updated correctly inside the loop,
and it will contain the selected drivers for the simulation, so it
doesn’t always return <code>False</code>.</p></li>
<li><p><strong><code>one_sim</code> draws <code>k</code> drivers without
replacement, instead of with replacement</strong></p>
<p>The issue is not about drawing without replacement; the issue is that
the function draws with replacement within the for loop, which could
result in the same driver being chosen more than once.</p></li>
</ul>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-8">Problem 8</h2>
<p>Suppose the DataFrame <code>D</code> contains a subset of the rows in
<code>orders</code>, such that:</p>
<ul>
<li><p>Some of the values in the <code>"minutes"</code> column are
missing.</p></li>
<li><p>None of the values in the <code>"minutes"</code> column are
missing for orders made in <code>"Moderate"</code> traffic.</p></li>
</ul>
<p>Each part of this question is independent of all other parts. In each
part, <strong>select all</strong> expressions that are
<strong>guaranteed</strong> to evaluate to the <strong>same</strong>
value, <strong>before and after</strong> the imputation code is run. The
first part is done for you.</p>
<p><br></p>
<h3 id="problem-8.1">Problem 8.1</h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>    t <span class="op">=</span> <span class="kw">lambda</span> x: x.fillna(x.mean())</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    D[<span class="st">&quot;minutes&quot;</span>] <span class="op">=</span> t(D[<span class="st">&quot;minutes&quot;</span>])</span></code></pre></div>
<p><strong>Answer</strong> <code>D.shape[0]</code></p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_1" aria-expanded="true" aria-controls="collapse8_1">
Click to view the solution.
</button>
</h2>
<div id="collapse8_1" class="accordion-collapse collapse"
aria-labelledby="heading8_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><code>D.shape[0]</code> is guaranteed to evaluate to the same value
before and after the imputation code is run because it represents the
total number of rows in the DataFrame, which is unaffected by filling in
missing values. The imputation modifies the “minutes” column but does
not alter the number of rows.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-8.2">Problem 8.2</h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a> t <span class="op">=</span> <span class="kw">lambda</span> x: x.fillna(x.mean())</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a> D[<span class="st">&quot;minutes&quot;</span>] <span class="op">=</span> t(D[<span class="st">&quot;minutes&quot;</span>])</span></code></pre></div>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> <code>D["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.groupby("traffic")["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> None of the above.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_2" aria-expanded="true" aria-controls="collapse8_2">
Click to view the solution.
</button>
</h2>
<div id="collapse8_2" class="accordion-collapse collapse"
aria-labelledby="heading8_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <code>D["minutes"].mean()</code>,
<code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code></p>
<p>In this imputation code we are performing mean imputation by filling
the missing values with the mean of the whole dataset.</p>
<p><code>D["minutes"].mean()</code> - As we’ve seen in class, replacing
missing values with the mean of the observed values does not change the
mean.</p>
<p><code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code> -
Since the imputation does not affect the rows where “traffic” is
“Moderate” (i.e., these rows already have no missing values), the mean
for this subset of the data will remain unchanged as well.</p>
<p><code>D.groupby("traffic")["minutes"].mean()</code> - This expression
will change after imputation. The grouped means for traffic categories
that had missing values will be affected by the imputation, as we’re
replacing missing values with the overall mean rather than
group-specific means.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-8.3">Problem 8.3</h3>
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a> t <span class="op">=</span> <span class="kw">lambda</span> x: x.fillna(x.mean())</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a> D[<span class="st">&quot;minutes&quot;</span>] <span class="op">=</span> D.groupby(<span class="st">&quot;traffic&quot;</span>)[<span class="st">&quot;minutes&quot;</span>].transform(t)</span></code></pre></div>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> <code>D["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.groupby("traffic")["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> None of the above.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_3" aria-expanded="true" aria-controls="collapse8_3">
Click to view the solution.
</button>
</h2>
<div id="collapse8_3" class="accordion-collapse collapse"
aria-labelledby="heading8_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:
<code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code>,
<code>D.groupby("traffic")["minutes"].mean()</code></p>
<p>In this imputation code we are performing conditional mean imputation
by filling the missing values with the minutes of each group of
traffic.</p>
<p><code>D["minutes"].mean()</code> - This expression will change after
imputation. When we fill missing values with group-specific means, the
overall mean can change.</p>
<p><code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code> -
Since the imputation only fills in missing values for the “minutes”
column based on the mean of the “minutes” values within each traffic
group, the mean for “Moderate” traffic will remain unchanged.</p>
<p><code>D.groupby("traffic")["minutes"].mean()</code> - The imputation
groups by the “traffic” column and fills missing values using the mean
of “minutes” within each group. Since “Moderate” traffic already had no
missing values, the mean for this group will not be affected, and
neither will the means for other groups, assuming the missing values are
only filled within their respective groups.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-8.4">Problem 8.4</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a> present <span class="op">=</span> D.loc[D[<span class="st">&quot;minutes&quot;</span>].notna(), <span class="st">&quot;minutes&quot;</span>]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a> n <span class="op">=</span> D[<span class="st">&quot;minutes&quot;</span>].isna().<span class="bu">sum</span>()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a> D.loc[D[<span class="st">&quot;minutes&quot;</span>].isna(), <span class="st">&quot;minutes&quot;</span>] <span class="op">=</span> np.random.choice(present, n)</span></code></pre></div>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> <code>D["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> <code>D.groupby("traffic")["minutes"].mean()</code></p></li>
<li><p><input type="checkbox" disabled="" /> None of the above.</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading8_4">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse8_4" aria-expanded="true" aria-controls="collapse8_4">
Click to view the solution.
</button>
</h2>
<div id="collapse8_4" class="accordion-collapse collapse"
aria-labelledby="heading8_4" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:
<code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code></p>
<p>In this imputation code we are performing unconditional probabilistic
imputation by filling the missing values by randomly sampling from the
present values in the “minutes” column.</p>
<p><code>D["minutes"].mean()</code> - This expression will likely change
after imputation, as we’re replacing missing values with randomly
selected observed values.</p>
<p><code>D.loc[D["traffic"] == "Moderate", "minutes"].mean()</code> -
Since “Moderate” traffic rows have no missing values, the imputation
does not affect them. Therefore, the mean for this subset of data will
remain unchanged.</p>
<p><code>D.groupby("traffic")["minutes"].mean()</code> - The means for
traffic categories that had missing values will likely change after
imputation, as we’re filling in those missing values with randomly
selected values from the entire dataset rather than values specific to
each traffic category.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-9">Problem 9</h2>
<p>In the DataFrame <code>orders</code>, assume that:</p>
<ul>
<li><p>The median delivery time in <code>"Low"</code> traffic was 22
minutes.</p></li>
<li><p>The median delivery time in <code>"Moderate"</code> traffic was
31 minutes.</p></li>
<li><p>The median delivery time in <code>"High"</code> traffic was 42
minutes.</p></li>
<li><p>The median delivery time in <code>"Very High"</code> traffic was
60 minutes.</p></li>
</ul>
<p>Draw the following visualization, given the information you have.</p>
<pre><code>orders.plot(kind=&quot;box&quot;, x=&quot;traffic&quot;, y=&quot;minutes&quot;)</code></pre>
<p>While it’s not possible to draw the visualization exactly, since you
don’t have all of the exact delivery times, it is possible to roughly
sketch it, such that the information provided above is clearly visible.
Some additional instructions:</p>
<ul>
<li><p>For simplicity, assume that across <code>"traffic"</code>
categories, the variation in delivery times is roughly the
same.</p></li>
<li><p>Make sure your axes are labeled correctly. <em>(Hint: The <span
class="math inline">y</span>-axis should have numerical
labels.)</em></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading9">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse9" aria-expanded="true" aria-controls="collapse9">
Click to view the solution.
</button>
</h2>
<div id="collapse9" class="accordion-collapse collapse"
aria-labelledby="heading9" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:</p>
<center>
<img src="../assets/images/wn25-midterm/newplot.png" width="60%"/>
</center>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-10">Problem 10</h2>
<p>Consider the following corpus of two documents:</p>
<ol type="1">
<li><p>butter chicken <span class="math inline">\underbrace{\text{naan
naan ... naan}}_{k \text{\: ``naan&quot;s total}}</span></p></li>
<li><p>curry with naan</p></li>
</ol>
<p>The total number of occurrences of “naan" in document 1 is <span
class="math inline">k</span>, so the total number of terms in document 1
is <span class="math inline">k + 2</span>, where <span
class="math inline">k \geq 3</span> is some positive integer. Note that
the two documents above are the only two documents in the corpus,
meaning that there are 5 unique terms total in the corpus.</p>
<p><br></p>
<h3 id="problem-10.1">Problem 10.1</h3>
<p>Given that the cosine similarity between the bag-of-words vector
representations of the two documents is <span
class="math inline">\displaystyle \frac{5}{9}</span>, what is the value
of <span class="math inline">k</span>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> 3</p></li>
<li><p><input type="radio" disabled="" /> 4</p></li>
<li><p><input type="radio" disabled="" /> 5</p></li>
<li><p><input type="radio" disabled="" /> 6</p></li>
<li><p><input type="radio" disabled="" /> 7</p></li>
<li><p><input type="radio" disabled="" /> 8</p></li>
<li><p><input type="radio" disabled="" /> 9</p></li>
<li><p><input type="radio" disabled="" /> 10</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_1" aria-expanded="true" aria-controls="collapse10_1">
Click to view the solution.
</button>
</h2>
<div id="collapse10_1" class="accordion-collapse collapse"
aria-labelledby="heading10_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: 5</p>
<p>The bag of words vector for Document 1 is: <span class="math display">\begin{bmatrix} 1 \\ 1 \\ k \\ 0 \\ 0
\end{bmatrix}</span></p>
<p>The bag of words vector for Document 2 is:<span class="math display">\begin{bmatrix} 0 \\ 0 \\ 1 \\ 1 \\ 1
\end{bmatrix}</span></p>
<p>The cosine similarity can be calculated using the formula: <span class="math display">
\text{cosine sim}(\vec d_1, \vec d_2) = \frac{\vec d_1 \cdot \vec
d_2}{\lVert d_1 \rVert \lVert d_2 \rVert}
</span></p>
<p>For the two vectors <span class="math inline">\vec{d_1} = (1, 1, k,
0, 0)</span> and <span class="math inline">\vec{d_2} = (0, 0, 1, 1,
1)</span>, the dot product is: <span class="math display">
\text{Dot product} = (1)(0) + (1)(0) + (k)(1) + (0)(1) + (0)(1) = k
</span></p>
<p>Next, we need to calculate the magnitudes (or norms) of the two
vectors. <span class="math display">
\|\vec{d_1}\| = \sqrt{1^2 + 1^2 + k^2 + 0^2 + 0^2} = \sqrt{2 + k^2}
</span></p>
<p><span class="math display">
\|\vec{d_2}\| = \sqrt{0^2 + 0^2 + 1^2 + 1^2 + 1^2} = \sqrt{3}
</span></p>
<p>Substitute the values we calculated: <span class="math display">
\text{Cosine similarity} = \frac{k}{\sqrt{2 + k^2} \cdot \sqrt{3}}
</span></p>
<p>We are given that the cosine similarity is <span class="math inline">\frac{5}{9}</span>. So, we set up the equation:
<span class="math display">
\frac{k}{\sqrt{2 + k^2} \cdot \sqrt{3}} = \frac{5}{9}
</span></p>
<p>Solving for <code>k</code> gives us 5.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-10.2">Problem 10.2</h3>
<p>In this part, assume we are using a base-2 logarithm.</p>
<ol type="i">
<li>Which term in <strong>document 1</strong> has the largest TF-IDF? If
there are ties, select them all.</li>
</ol>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> butter</p></li>
<li><p><input type="checkbox" disabled="" /> chicken</p></li>
<li><p><input type="checkbox" disabled="" /> naan</p></li>
<li><p><input type="checkbox" disabled="" /> curry</p></li>
<li><p><input type="checkbox" disabled="" /> with</p></li>
</ul>
<ol start="2" type="i">
<li>Which term in <strong>document 2</strong> has the largest TF-IDF? If
there are ties, select them all.</li>
</ol>
<ul class="task-list">
<li><p><input type="checkbox" disabled="" /> butter</p></li>
<li><p><input type="checkbox" disabled="" /> chicken</p></li>
<li><p><input type="checkbox" disabled="" /> naan</p></li>
<li><p><input type="checkbox" disabled="" /> curry</p></li>
<li><p><input type="checkbox" disabled="" /> with</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_2" aria-expanded="true" aria-controls="collapse10_2">
Click to view the solution.
</button>
</h2>
<div id="collapse10_2" class="accordion-collapse collapse"
aria-labelledby="heading10_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:</p>
<ul>
<li><p>butter and chicken</p></li>
<li><p>curry and with</p></li>
</ul>
<p>The TF-IDF score of a term in a document is given by: <span class="math display">
\text{tf-idf}(t,d) = \text{tf}(t,d) \cdot \text{idf}(t)
                    = \frac{\# \text{ of occurrences of } t \text{ in }
d }{\text{total } \# \text{ of terms in } d} \cdot
\log_2\left(\frac{\text{total } \# \text{ of documents}}{\# \text{ of
documents in which } t \text{ appears}}\right)
</span></p>
<p>TF-IDF scores are high when:</p>
<ol type="1">
<li><p>A term occurs frequently in the document (high TF), and</p></li>
<li><p>A term appears in few documents in the corpus (high
IDF).</p></li>
</ol>
<p><strong>Naan</strong> appears in both documents, so its IDF is 0 and
its TF-IDF is 0 in both.</p>
<p><strong>Butter</strong> and <strong>chicken</strong> each appear only
once, and only in document 1. So their TF is low, but their IDF is
high.</p>
<p><strong>Curry</strong> and <strong>with</strong> each appear only
once, and only in document 2. So they also have high IDF and non-zero
TF.</p>
<p>Therefore, <strong>butter</strong> and <strong>chicken</strong> have
the highest TF-IDF in document 1, and <strong>curry</strong> and
<strong>with</strong> in document 2.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-10.3">Problem 10.3</h3>
<p>This part is independent of the previous parts.</p>
<p>In practice, you’ll encounter lots of new metrics and formulas that
you need to make sense of on the job. For instance, the
<strong>Wolverine Score (WS)</strong>, defined below, is an alternative
to the TF-IDF that also tries to quantify the importance of a term <span
class="math inline">t</span> to a document <span
class="math inline">d</span>, given a corpus of documents <span
class="math inline">d_1, d_2, ..., d_n</span>.</p>
<p><span class="math display">
\text{WS}(t, d) = \left( \frac{\text{total \# of terms in } d}{\text{\#
of occurrences of } t \text{ in } d} \right) \cdot \left(
\frac{\sum_{i=1}^n \text{\# of occurrences of } t \text{ in }
d_i}{\sum_{i=1}^n \text{total \# of terms in } d_i} \right)
</span></p>
<p>Fill in the blank to complete the statement below.</p>
<p>“If <code>___</code>, then term <span class="math inline">t</span> is
more common in document <span class="math inline">d</span> than it is
across the entire corpus, and so <span class="math inline">t</span> is
likely an important term in <span class="math inline">d</span>."</p>
<p>What goes in the blank?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &lt; 0</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &gt; 0</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &lt; 1</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &gt; 1</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &lt; \frac{1}{n}</span>,
where <span class="math inline">n</span> is the number of documents in
the corpus</p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\text{WS}(t, d) &gt; \frac{1}{n}</span>,
where <span class="math inline">n</span> is the number of documents in
the corpus</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading10_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse10_3" aria-expanded="true" aria-controls="collapse10_3">
Click to view the solution.
</button>
</h2>
<div id="collapse10_3" class="accordion-collapse collapse"
aria-labelledby="heading10_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <span class="math inline">\text{WS}(t, d)
&lt; 1</span></p>
<p>The Wolverine Score compares a term’s relative frequency in document
<span class="math inline">d</span> versus its average frequency in the
entire corpus.</p>
<p>The first part of WS, <span class="math inline">\frac{\text{total
terms in } d}{\# \text{ of occurrences of } t \text{ in } d}</span>, is
the inverse of how frequent <span class="math inline">t</span> is in
<span class="math inline">d</span>.</p>
<p>The second part, <span class="math inline">\frac{\text{total
occurrences of } t \text{ in corpus}}{\text{total terms in
corpus}}</span>, is the overall frequency of <span class="math inline">t</span>.</p>
<p>If WS is less than 1, it means that the term occurs more often
<em>within</em> <span class="math inline">d</span> than <em>on
average</em> across all documents. This implies that the term is
especially important or relevant to <span class="math inline">d</span>.</p>
<p>Example: If a term appears 5 times in a 10-word document (50%), but
only 10 times in a 100-word corpus (10%), then: <span class="math display">
\text{WS} = \left(\frac{10}{5}\right) \cdot \left(\frac{10}{100}\right)
= 2 \cdot 0.1 = 0.2 &lt; 1
</span> So WS &lt; 1 means the term is concentrated in <span class="math inline">d</span>.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-11">Problem 11</h2>
<p>The HTML document below contains the items on Wolverine Flavors
Express’ menu. We’ve only shown three menu items, but there are many
more, as indicated by the ellipses <code>...</code></p>
<pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Wolverine Flavors Express: A2&#39;s Favorite Indian Spot&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Wolverine Flavors Express Menu&lt;/h1&gt;
        &lt;div class=&quot;meta&quot;&gt;Last Updated February 25, 2025&lt;/div&gt;
        &lt;div class=&quot;menu-item&quot; data-price=&quot;14.99&quot; data-calories=&quot;650&quot;&gt;
            &lt;h2&gt;Butter Chicken&lt;/h2&gt;
            &lt;p&gt;Tender chicken in creamy tomato sauce - $14.99&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;menu-item&quot; data-price=&quot;12.99&quot; data-calories=&quot;480&quot;&gt;
            &lt;h2&gt;Chana Masala&lt;/h2&gt;
            &lt;p&gt;Spiced chickpea curry - $12.99 ($11.99 on Tuesday)&lt;/p&gt;
        &lt;/div&gt;
        ...
        &lt;div class=&quot;menu-item&quot; data-price=&quot;21.99&quot; data-calories=&quot;1050&quot;&gt;
            &lt;h2&gt;Chicken 65 Biryani&lt;/h2&gt;
            &lt;p&gt;Spicy chicken marinated with rice - $21.99 (special)&lt;/p&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>Suppose we define <code>soup</code> to be a BeautifulSoup object that
is instantiated using the HTML document above. Fill in the blanks below
so that <code>low_cals</code> contains the names of the menu items with
less than 500 calories.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>    low_cals <span class="op">=</span> []</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> __(i)__:</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> __(ii)__:</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>            low_cals.append(__(iii)__)</span></code></pre></div>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading11">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse11" aria-expanded="true" aria-controls="collapse11">
Click to view the solution.
</button>
</h2>
<div id="collapse11" class="accordion-collapse collapse"
aria-labelledby="heading11" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:</p>
<ul>
<li><div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a>soup.find_all(<span class="st">"div"</span>, class_<span class="op">=</span><span class="st">"menu-item"</span>) <span class="kw">or</span> soup.find_all(<span class="st">"div"</span>, attrs<span class="op">=</span>{<span class="st">"class"</span>: <span class="st">"menu-item"</span>}). </span></code></pre></div></li>
<li><div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1" tabindex="-1"></a><span class="bu">float</span>(x.get(<span class="st">"data-calories"</span>)) <span class="op">&lt;</span> <span class="dv">500</span></span></code></pre></div></li>
<li><div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a aria-hidden="true" href="#cb3-1" tabindex="-1"></a>x.find(<span class="st">"h2"</span>).text </span></code></pre></div></li>
</ul>
<div id="cb4" class="sourceCode">
<pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a aria-hidden="true" href="#cb4-1" tabindex="-1"></a>soup.find_all(<span class="st">"div"</span>, class_<span class="op">=</span><span class="st">"menu-item"</span>) <span class="kw">or</span> soup.find_all(<span class="st">"div"</span>, attrs<span class="op">=</span>{<span class="st">"class"</span>: <span class="st">"menu-item"</span>}). </span></code></pre>
</div>
<p>We want to extract all the menu items from the HTML. Each menu item
is contained within a div tag with the class menu-item. So, we need to
find all the div elements that have this class. In BeautifulSoup, we can
do this with the <code>find_all()</code> method, which searches the
document for all elements matching a specific condition.</p>
<div id="cb5" class="sourceCode">
<pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a aria-hidden="true" href="#cb5-1" tabindex="-1"></a><span class="bu">float</span>(x.get(<span class="st">"data-calories"</span>)) <span class="op">&lt;</span> <span class="dv">500</span> </span></code></pre>
</div>
<p>This code is used to check whether the number of calories in each
menu item is less than 500. We first use
<code>x.get("data-calories")</code> to retrieve the calorie count as a
string. We then convert that string to a floating-point number using
float() so we can compare it with 500. If the calorie count is less than
500, we extract the name of the menu item from the
<code>&lt;h2&gt;</code> tag and add it to the low_cals list.</p>
<div id="cb6" class="sourceCode">
<pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a aria-hidden="true" href="#cb6-1" tabindex="-1"></a>x.find(<span class="st">"h2"</span>).text</span></code></pre>
</div>
<p>Lastly, we want to extract the name of the menu item from each
selected div element. The find(“h2”) method is called on x.
<code>.find</code> searches for the first occurrence of a
<code>&lt;h2&gt;</code> tag within the x element. Once we have the
<code>&lt;h2&gt;</code> element (in this case,
<code>Chana Masala</code>), we use .text to extract the text content
inside the <code>&lt;h2&gt;</code> tag.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-12">Problem 12</h2>
<p>When we originally downloaded the <code>orders</code> dataset from
the internet, some of the values in the <code>"minutes"</code> columns
were formatted incorrectly as strings with two decimals in them. To
clean the data, we implemented the function <code>clean_minutes</code>,
which takes in an invalid minutes value as a string and returns a
correctly formatted minutes value as a float. Example behavior of
<code>clean_minutes</code> is given below.</p>
<pre><code>&gt;&gt;&gt; clean_minutes(&quot;8.334.108&quot;)
83.34
&gt;&gt;&gt; clean_minutes(&quot;5.123.999&quot;)
51.23
&gt;&gt;&gt; clean_minutes(&quot;12.091.552&quot;)
120.91
&gt;&gt;&gt; clean_minutes(&quot;525.345.262&quot;)
5253.45</code></pre>
<p>As a helper function, we implemented the function
<code>split_pieces</code>; example behavior is given below.</p>
<pre><code>&gt;&gt;&gt; split_pieces(&quot;8.334.108&quot;)
(&quot;8&quot;, &quot;334&quot;)
&gt;&gt;&gt; split_pieces(&quot;12.091.552&quot;)
(&quot;12&quot;, &quot;091&quot;)</code></pre>
<p>Fill in the blanks to complete the implementations of the functions
<code>split_pieces</code> and <code>clean_minutes</code> so that they
behave as described above. Assume that the inputs to both functions are
formatted like in the examples above, i.e. that there are exactly 3
digits between the middle two decimals.</p>
<pre><code>def split_pieces(s):
    return re.findall(__(i)__, s)[0]

def clean_minutes(s):   
    p = split_pieces(s)
    return __(ii)__</code></pre>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading12">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse12" aria-expanded="true" aria-controls="collapse12">
Click to view the solution.
</button>
</h2>
<div id="collapse12" class="accordion-collapse collapse"
aria-labelledby="heading12" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>:</p>
<ul>
<li><p><code>(\d+)\.(\d{3})</code></p></li>
<li><div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" href="#cb1-1" tabindex="-1"></a><span class="bu">int</span>(p[<span class="dv">0</span>] <span class="op">+</span> p[<span class="dv">1</span>]) <span class="op">/</span> <span class="dv">100</span> </span></code></pre></div></li>
</ul>
<p><br/>
</p>
<p><code>(\d+)\.(\d{3})</code></p>
<p><code>(\d+)</code>: This part matches one or more digits before the
first decimal point. The parentheses around capture this part into a
group, allowing us to extract the digits before the first decimal.</p>
<p><code>\.</code>: This matches the literal decimal point. The
backslash  is necessary because the dot . is a special character in
regular expressions that usually matches any character, so we need to
escape it with a backslash to match an actual period.</p>
<p><code>(\d{3})</code>: This matches exactly three digits after the
first decimal and before the second decimal. The parentheses around
capture these digits into another group, allowing us to extract them
separately.</p>
<p><br/>
</p>
<div id="cb2" class="sourceCode">
<pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a aria-hidden="true" href="#cb2-1" tabindex="-1"></a><span class="bu">int</span>(p[<span class="dv">0</span>] <span class="op">+</span> p[<span class="dv">1</span>]) <span class="op">/</span> <span class="dv">100</span> </span></code></pre>
</div>
<p>p is a tuple returned by the split_pieces(s) function, where p[0] is
the first part (before the first decimal point) and p[1] is the part
between the two decimals.</p>
<p>For example, if the input string is “8.334.108”, p would be (“8”,
“334”). The expression <code>python p[0] + p[1]</code> concatenates
these two parts together, creating the string “83334”. This represents
the combined value of the minutes, but it’s not in the correct format.
We can wrap this around the int function which will convert the
concatenated string “83334” into an integer.</p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="problem-13">Problem 13</h2>
<p>Suppose we’d like to fit a constant model, <span
class="math inline">H(x_i) = h</span>, to predict the number of minutes
a delivery will take. To find the optimal constant prediction, <span
class="math inline">h^*</span>, we decide to use the <strong><span
class="math inline">\alpha \beta</span>-balanced</strong> loss function,
defined below:</p>
<p><span class="math display">L_{\alpha \beta}(y_i, h) = (\alpha y_i -
\beta h)^2</span></p>
<p>where <span class="math inline">\alpha</span> and <span
class="math inline">\beta</span> are both constants, and <span
class="math inline">\beta \neq 0</span>.</p>
<p>Below, assume <span class="math inline">\bar{y} = \frac{1}{n} \sum_{i
= 1}^n y_i</span> is the mean number of minutes a delivery took.</p>
<p><br></p>
<h3 id="problem-13.1">Problem 13.1</h3>
<p>Suppose <span class="math inline">\alpha = 3</span> and <span
class="math inline">\beta = 3</span>, so <span
class="math inline">L_{\alpha \beta}(y_i, h) = (3y_i - 3h)^2</span>.</p>
<p>What is the optimal constant prediction, <span
class="math inline">h^*</span>, that minimizes average <span
class="math inline">\alpha \beta</span>-balanced loss?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">\bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{2} \bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">2 \bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{3} \bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">3 \bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{6} \bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">6 \bar{y}</span></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_1" aria-expanded="true" aria-controls="collapse13_1">
Click to view the solution.
</button>
</h2>
<div id="collapse13_1" class="accordion-collapse collapse"
aria-labelledby="heading13_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <span class="math inline">\bar{y}</span></p>
<p>To find the optimal parameter, we have to minimize the average loss
function. The loss function is given as: <span class="math inline">L_{\alpha \beta}(y_i, h) = (3y_i - 3h)^2</span></p>
<p>To minimize this, we need to find the value of <span class="math inline">h</span> that minimizes the sum of squared errors
for all <span class="math inline">y_{i}</span>. We do this by taking the
derivative of the loss function and solving it by setting it to
zero.</p>
<p>Expanding the squared term: <span class="math display">
\sum_{i=1}^{n} (9y_i^2 - 18y_i h + 9h^2)</span></p>
<p>Using summation properties: <span class="math display">
9 \sum_{i=1}^{n} y_i^2 - 18h \sum_{i=1}^{n} y_i + 9h^2 n
</span></p>
<p>Differentiating: <span class="math display">
\frac{d}{dh} \left( 9 \sum_{i=1}^{n} y_i^2 - 18h \sum_{i=1}^{n} y_i +
9h^2 n \right)
</span></p>
<p>Since the first term <span class="math inline">9 \sum_{i=1}^{n}
y_i^2</span> does not depend on <span class="math inline">h</span>, its
derivative is zero.</p>
<p>Differentiating the remaining terms: <span class="math display">
\frac{d}{dh} (-18h \sum_{i=1}^{n} y_i) = -18 \sum_{i=1}^{n} y_i
</span></p>
<p><span class="math display">
\frac{d}{dh} (9h^2 n) = 18h n
</span></p>
<p>Thus, the derivative of the total loss is: <span class="math display">
-18 \sum_{i=1}^{n} y_i + 18h n
</span></p>
<p>Setting the derivative equal to zero: <span class="math display">
-18 \sum_{i=1}^{n} y_i + 18h n = 0
</span></p>
<p>Dividing both sides by 18: <span class="math display">
- \sum_{i=1}^{n} y_i + h n = 0
</span></p>
<p>Solving for <span class="math inline">h</span>: <span class="math display">
h = \frac{\sum_{i=1}^{n} y_i}{n}
</span></p>
<p>This is equivalent to mean of <span class="math inline">\bar{y}</span>. Thus, the optimal constant
prediction is the mean of the delivery times.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-13.2">Problem 13.2</h3>
<p>Suppose <span class="math inline">\alpha = 6</span> and <span
class="math inline">\beta = 3</span>, so <span
class="math inline">L_{\alpha \beta}(y_i, h) = (6y_i - 3h)^2</span>.</p>
<p>What is the optimal constant prediction, <span
class="math inline">h^*</span>, that minimizes average <span
class="math inline">\alpha \beta</span>-balanced loss?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">\bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{2} \bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">2 \bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{3} \bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">3 \bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\frac{1}{6} \bar{y}</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">6 \bar{y}</span></p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_2" aria-expanded="true" aria-controls="collapse13_2">
Click to view the solution.
</button>
</h2>
<div id="collapse13_2" class="accordion-collapse collapse"
aria-labelledby="heading13_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <span class="math inline">2
\bar{y}</span></p>
<p>To find the optimal parameter, we have to minimize the average loss
function. The loss function is given as:<br/>
<span class="math display">L_{\alpha \beta}(y_i, h) = (6y_i -
3h)^2</span></p>
<p>To minimize this, we need to find the value of <span class="math inline">h</span> that minimizes the sum of squared errors
for all <span class="math inline">y_i</span>. We do this by taking the
derivative of the loss function and solving it by setting it to
zero.</p>
<p>Expanding the squared term: <span class="math display">
\sum_{i=1}^{n} (36y_i^2 - 36y_i h + 9h^2) </span></p>
<p>Using summation properties: <span class="math display">
36 \sum_{i=1}^{n} y_i^2 - 36h \sum_{i=1}^{n} y_i + 9h^2 n
</span></p>
<p>Differentiating: <span class="math display">
\frac{d}{dh} \left( 36 \sum_{i=1}^{n} y_i^2 - 36h \sum_{i=1}^{n} y_i +
9h^2 n \right)
</span></p>
<p>Since the first term <span class="math inline">36 \sum_{i=1}^{n}
y_i^2</span> does not depend on <span class="math inline">h</span>, its
derivative is zero.</p>
<p>Differentiating the remaining terms: <span class="math display">
\frac{d}{dh} (-36h \sum_{i=1}^{n} y_i) = -36 \sum_{i=1}^{n} y_i
</span></p>
<p><span class="math display">
\frac{d}{dh} (9h^2 n) = 18h n
</span></p>
<p>Thus, the derivative of the total loss is: <span class="math display">
-36 \sum_{i=1}^{n} y_i + 18h n
</span></p>
<p>Setting the derivative equal to zero: <span class="math display">
-36 \sum_{i=1}^{n} y_i + 18h n = 0
</span></p>
<p>Dividing both sides by 18: <span class="math display">
-2 \sum_{i=1}^{n} y_i + h n = 0
</span></p>
<p>Solving for <span class="math inline">h</span>: <span class="math display">
h = \frac{2 \sum_{i=1}^{n} y_i}{n} = 2 \bar{y}
</span></p>
<p>Thus, the optimal constant prediction is <span class="math inline">2
\bar{y}</span>.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-13.3">Problem 13.3</h3>
<p>Find the optimal constant prediction, <span
class="math inline">h^*</span>, that minimizes average <span
class="math inline">\alpha \beta</span>-balanced loss <strong>in
general</strong>, for any valid choice of <span
class="math inline">\alpha</span> and <span
class="math inline">\beta</span>. Show your work, and <span
class="math inline">\boxed{\text{box}}</span> your final answer, which
should be an expression involving <span
class="math inline">\bar{y}</span>, <span
class="math inline">\alpha</span>, <span
class="math inline">\beta</span>, and/or other constants.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading13_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse13_3" aria-expanded="true" aria-controls="collapse13_3">
Click to view the solution.
</button>
</h2>
<div id="collapse13_3" class="accordion-collapse collapse"
aria-labelledby="heading13_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <span class="math inline">\frac{\alpha}{\beta} \bar{y}</span></p>
<p>To find the optimal parameter, we have to minimize the average loss
function. The loss function is given as:<br/>
<span class="math display">L_{\alpha \beta}(y_i, h) = (\alpha y_i -
\beta h)^2</span></p>
<p>To minimize this, we need to find the value of <span class="math inline">h</span> that minimizes the sum of squared errors
for all <span class="math inline">y_i</span>. We do this by taking the
derivative of the loss function and solving it by setting it to
zero.</p>
<p>Expanding the squared term: <span class="math display">
\sum_{i=1}^{n} (\alpha^2 y_i^2 - 2\alpha\beta y_i h + \beta^2 h^2)
</span></p>
<p>Using summation properties: <span class="math display">
\alpha^2 \sum_{i=1}^{n} y_i^2 - 2\alpha\beta h \sum_{i=1}^{n} y_i +
\beta^2 h^2 n
</span></p>
<p>Differentiating: <span class="math display">
\frac{d}{dh} \left( \alpha^2 \sum_{i=1}^{n} y_i^2 - 2\alpha\beta h
\sum_{i=1}^{n} y_i + \beta^2 h^2 n \right)
</span></p>
<p>Since the first term <span class="math inline">\alpha^2
\sum_{i=1}^{n} y_i^2</span> does not depend on <span class="math inline">h</span>, its derivative is zero.</p>
<p>Differentiating the remaining terms: <span class="math display">
\frac{d}{dh} (-2\alpha\beta h \sum_{i=1}^{n} y_i) = -2\alpha\beta
\sum_{i=1}^{n} y_i
</span></p>
<p><span class="math display">
\frac{d}{dh} (\beta^2 h^2 n) = 2\beta^2 h n
</span></p>
<p>Thus, the derivative of the total loss is: <span class="math display">
-2\alpha\beta \sum_{i=1}^{n} y_i + 2\beta^2 h n
</span></p>
<p>Setting the derivative equal to zero: <span class="math display">
-2\alpha\beta \sum_{i=1}^{n} y_i + 2\beta^2 h n = 0
</span></p>
<p>Dividing both sides by 2: <span class="math display">
- \alpha\beta \sum_{i=1}^{n} y_i + \beta^2 h n = 0
</span></p>
<p>Solving for <span class="math inline">h</span>: <span class="math display">
h = \frac{\alpha\beta \sum_{i=1}^{n} y_i}{\beta^2 n}
</span></p>
<p>We substitute <span class="math inline">\sum_{i=1}^{n} y_i =
n\bar{y}</span> into the equation: <span class="math display">
h = \frac{\alpha\beta (n\bar{y})}{\beta^2 n}
</span></p>
<p>This simplified gives us <span class="math display">
h^* = \frac{\alpha}{\beta} \bar{y}
</span></p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-14">Problem 14</h2>
<p>Suppose we’d like to predict the number of minutes a delivery will
take (<span class="math inline">y</span>) as a function of distance
(<span class="math inline">x</span>). To do so, we look to our dataset
of <span class="math inline">n</span> deliveries, <span
class="math inline">(x_1, y_1), (x_2, y_2), ..., (x_n, y_n)</span>, and
fit two simple linear models:</p>
<ul>
<li><p><span class="math inline">F(x_i) = a_0 + a_1 x_i</span>, where:
<span class="math display">a_1 = r \frac{\sigma_y}{\sigma_x}, \qquad a_0
= \bar{y} - r \frac{\sigma_y}{\sigma_x} \bar{x}</span></p>
<p>Here, <span class="math inline">r</span> is the correlation
coefficient between <span class="math inline">x</span> and <span
class="math inline">y</span>, <span class="math inline">\bar{x}</span>
and <span class="math inline">\bar{y}</span> are the means of <span
class="math inline">x</span> and <span class="math inline">y</span>,
respectively, and <span class="math inline">\sigma_x</span> and <span
class="math inline">\sigma_y</span> are the standard deviations of <span
class="math inline">x</span> and <span class="math inline">y</span>,
respectively.</p></li>
<li><p><span class="math inline">G(x_i) = b_0 + b_1 x_i</span>, where
<span class="math inline">b_0</span> and <span
class="math inline">b_1</span> are chosen such that the line <span
class="math inline">G(x_i) = b_0 + b_1 x_i</span> minimizes <strong>mean
absolute error</strong> on the dataset. Assume that no other line
minimizes mean absolute error on the dataset, i.e. that the values of
<span class="math inline">b_0</span> and <span
class="math inline">b_1</span> are unique.</p></li>
</ul>
<p><br></p>
<h3 id="problem-14.1">Problem 14.1</h3>
<p>Fill in the <span class="math inline">\boxed{\text{???}}</span>:
<span class="math display">\displaystyle \sum_{i = 1}^n (y_i - G(x_i))^2
\:\:\: \boxed{???} \:\:\: \sum_{i = 1}^n (y_i - F(x_i))^2</span></p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">\geq</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">&gt;</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">=</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">&lt;</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\leq</span></p></li>
<li><p><input type="radio" disabled="" /> Impossible to tell</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_1">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_1" aria-expanded="true" aria-controls="collapse14_1">
Click to view the solution.
</button>
</h2>
<div id="collapse14_1" class="accordion-collapse collapse"
aria-labelledby="heading14_1" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: &gt;</p>
<p>The quantity <span class="math inline">\frac{1}{n} \sum_{i = 1}^n
(y_i - F(x_i))^2</span> is the <strong>mean squared error</strong> (MSE)
of model <span class="math inline">F</span>. By definition, <span class="math inline">F</span> is the line that minimizes MSE over all
possible linear models.</p>
<p>The quantity <span class="math inline">\frac{1}{n} \sum_{i = 1}^n
(y_i - G(x_i))^2</span> is the mean squared error of model <span class="math inline">G</span>, which is not optimized for MSE but rather
for <strong>mean absolute error</strong> (MAE).</p>
<p>Since <span class="math inline">F</span> is specifically constructed
to minimize the squared error, and <span class="math inline">G</span> is
not, we must have:<br/>
<span class="math display"> \sum_{i = 1}^{n} (y_i - G(x_i))^2 &gt;
\sum_{i = 1}^{n} (y_i - F(x_i))^2 </span></p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-14.2">Problem 14.2</h3>
<p>Fill in the <span class="math inline">\boxed{\text{???}}</span>:
<span class="math display">\displaystyle \left( \sum_{i = 1}^n \big| y_i
- G(x_i) \big| \right)^2 \:\:\: \boxed{???} \:\:\: \left( \sum_{i = 1}^n
\big| y_i - F(x_i) \big| \right)^2</span></p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> <span class="math inline">\geq</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">&gt;</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">=</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">&lt;</span></p></li>
<li><p><input type="radio" disabled="" /> <span class="math inline">\leq</span></p></li>
<li><p><input type="radio" disabled="" /> Impossible to tell</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_2">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_2" aria-expanded="true" aria-controls="collapse14_2">
Click to view the solution.
</button>
</h2>
<div id="collapse14_2" class="accordion-collapse collapse"
aria-labelledby="heading14_2" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: &lt;</p>
<p>The quantity <span class="math inline">\frac{1}{n} \sum_{i = 1}^n |
y_i - G(x_i) |</span> is the <strong>mean absolute error</strong> (MAE)
of model <span class="math inline">G</span>. By definition, <span class="math inline">G</span> is the line that minimizes MAE over all
possible linear models.</p>
<p>The quantity <span class="math inline">\frac{1}{n} \sum_{i = 1}^n |
y_i - F(x_i) |</span> is the mean absolute error of model <span class="math inline">F</span>, which is not optimized for MAE but rather
for <strong>mean squared error</strong> (MSE).</p>
<p>Since <span class="math inline">G</span> is specifically constructed
to minimize the absolute error, and <span class="math inline">F</span>
is not, we must have:<br/>
<span class="math display"> \sum_{i = 1}^{n} | y_i - G(x_i) | &lt;
\sum_{i = 1}^{n} | y_i - F(x_i) | </span></p>
<p>Squaring both sides preserves the inequality (since both sides are
non-negative), so:<br/>
<span class="math display"> \left( \sum_{i = 1}^{n} | y_i - G(x_i) |
\right)^2 &lt; \left( \sum_{i = 1}^{n} | y_i - F(x_i) | \right)^2
</span></p>
</div>
</div>
</div>
</div>
<p><br></p>
<h3 id="problem-14.3">Problem 14.3</h3>
<p>Below, we’ve drawn both lines, <span class="math inline">F</span>,
and <span class="math inline">G</span>, along with a scatter plot of the
original <span class="math inline">n</span> deliveries.</p>
<center>
<img src="../assets/images/wn25-midterm/regression.png" width=50%>
</center>
<p>Which line corresponds to line <strong><span
class="math inline">F</span></strong>?</p>
<ul class="task-list">
<li><p><input type="radio" disabled="" /> Line 1</p></li>
<li><p><input type="radio" disabled="" /> Line 2</p></li>
</ul>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading14_3">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse14_3" aria-expanded="true" aria-controls="collapse14_3">
Click to view the solution.
</button>
</h2>
<div id="collapse14_3" class="accordion-collapse collapse"
aria-labelledby="heading14_3" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: Line 1</p>
<p>The key idea is that models trained with squared loss (MSE) are more
sensitive to outliers than models trained with absolute loss (MAE).</p>
<p>Since Line 1 appears to be “pulled up” more strongly by an outlier,
it suggests that this line was influenced more heavily by extreme
values. This behavior aligns with how MSE-based regression works:
outliers have a greater impact on the overall loss because squaring the
errors makes large deviations even more significant.</p>
<p>In contrast, MAE-based regression (Line 2) is less sensitive to
outliers because absolute differences do not grow as quickly.</p>
<p>Therefore, Line 1 corresponds to <span class="math inline">F</span>,
the MSE-minimizing line.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<hr />
<h2 id="problem-15">Problem 15</h2>
<p><strong>Optional</strong></p>
<p>In Question 7, assuming that there are 100 unique drivers, what is
the true, theoretical probability that <code>"WOLVAA01"</code> wins a
free gift card? Show your work, and your final answer, which should be a
<strong>fraction</strong>.</p>
<p>Don’t spend time on this question if you haven’t attempted all other
questions, as it is purely for (very little)
<code>extra credit</code>.</p>
<div id="accordionExample" class="accordion">
<div class="accordion-item">
<h2 class="accordion-header" id="heading15">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse15" aria-expanded="true" aria-controls="collapse15">
Click to view the solution.
</button>
</h2>
<div id="collapse15" class="accordion-collapse collapse"
aria-labelledby="heading15" data-bs-parent="#accordionExample">
<div class="accordion-body">
<header id="title-block-header">
<h1 class="title"> </h1>
</header>
<p><strong>Answer</strong>: <span class="math inline">\frac{55}{100}</span></p>
<p>We have 100 unique drivers and 10 different groups. The probability
that <code>"WOLVAA01"</code> wins is calculated by adding up the chances
that it is chosen in each group.</p>
<p>For each group, the probability of winning depends on how many
drivers are in that group. For example:</p>
<ul>
<li>In the first group, the probability that <code>"WOLVAA01"</code>
wins is <span class="math inline">\frac{1}{10} \times
\frac{1}{100}</span>.</li>
<li>In the second group, the probability is <span class="math inline">\frac{1}{10} \times \frac{2}{100}</span>.</li>
<li>This continues until the tenth group, where the probability is <span class="math inline">\frac{1}{10} \times \frac{10}{100}</span>.</li>
</ul>
<p>The total probability is the sum of these individual probabilities:
<span class="math display">
\text{Total Probability} = \frac{1}{10} \times \frac{1}{100} +
\frac{1}{10} \times \frac{2}{100} + \cdots + \frac{1}{10} \times
\frac{10}{100}
</span> which simplifies to: <span class="math display">
\text{Total Probability} = \frac{1}{1000} (1 + 2 + \cdots + 10) =
\frac{1}{1000} \times 55 = \frac{55}{1000} = \frac{55}{100}.
</span></p>
</div>
</div>
</div>
</div>
<hr />
<h2 id="section"><span class="math display"> </span></h2>
<h4
id="feedback-find-an-error-still-confused-have-a-suggestion-let-us-know-here.">👋
Feedback: Find an error? Still confused? Have a suggestion? Let us know
<a href="https://forms.gle/xK4DpWXh9rq8AKP37">here</a>.</h4>
<hr />
</body>
</html>
